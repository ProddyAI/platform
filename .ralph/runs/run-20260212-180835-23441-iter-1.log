OpenAI Codex v0.99.0 (research preview)
--------
workdir: /Users/macbook/Documents/GitHub/platform
model: gpt-5.3-codex
provider: openai
approval: never
sandbox: danger-full-access
reasoning effort: medium
reasoning summaries: auto
session id: 019c51dc-4659-7933-8311-a86976f24a94
--------
user
# Build

You are an autonomous coding agent. Your task is to complete the work for exactly one story and record the outcome.

## Paths
- PRD: /Users/macbook/Documents/GitHub/platform/.agents/tasks/prd-convex-composio-assistant.json
- AGENTS (optional): /Users/macbook/Documents/GitHub/platform/AGENTS.md
- Progress Log: /Users/macbook/Documents/GitHub/platform/.ralph/progress.md
- Guardrails: /Users/macbook/Documents/GitHub/platform/.ralph/guardrails.md
- Guardrails Reference: /usr/local/lib/node_modules/@iannuttall/ralph/.agents/ralph/references/GUARDRAILS.md
- Context Reference: /usr/local/lib/node_modules/@iannuttall/ralph/.agents/ralph/references/CONTEXT_ENGINEERING.md
- Errors Log: /Users/macbook/Documents/GitHub/platform/.ralph/errors.log
- Activity Log: /Users/macbook/Documents/GitHub/platform/.ralph/activity.log
- Activity Logger: /Users/macbook/Documents/GitHub/platform/ralph log
- No-commit: false
- Repo Root: /Users/macbook/Documents/GitHub/platform
- Run ID: 20260212-180835-23441
- Iteration: 1
- Run Log: /Users/macbook/Documents/GitHub/platform/.ralph/runs/run-20260212-180835-23441-iter-1.log
- Run Summary: /Users/macbook/Documents/GitHub/platform/.ralph/runs/run-20260212-180835-23441-iter-1.md

## Global Quality Gates (apply to every story)
- bun run type
- bun run check
- No secrets in logs or client payloads
- Assistant fallback path must be preserved

## Selected Story (Do not change scope)
ID: S4
Title: Harden error handling and fallback UX

Story details:
### S4: Harden error handling and fallback UX
Status: in_progress
Depends on: S1

Description:
Normalize error handling across assistant and composio routes so failures produce actionable messages and preserve usable fallback responses.

Acceptance Criteria:
- [ ] Composio path failures return actionable user-facing messages
- [ ] Fallback assistant response is returned for recoverable failures
- [ ] Error logging is consistent and does not leak sensitive data


If the story details are empty or missing, STOP and report that the PRD story format could not be parsed.

## Rules (Non-Negotiable)
- Implement **only** the work required to complete the selected story.
- Complete all tasks associated with this story (and only this story).
- Do NOT ask the user questions.
- Do NOT change unrelated code.
- Do NOT assume something is unimplemented — confirm by reading code.
- Implement completely; no placeholders or stubs.
- If No-commit is true, do NOT commit or push changes.
- Do NOT edit the PRD JSON (status is handled by the loop).
- All changes made during the run must be committed (including updates to progress/logs).
 - Before committing, perform a final **security**, **performance**, and **regression** review of your changes.

## Your Task (Do this in order)
1. Read /Users/macbook/Documents/GitHub/platform/.ralph/guardrails.md before any code changes.
2. Read /Users/macbook/Documents/GitHub/platform/.ralph/errors.log for repeated failures to avoid.
3. Read /Users/macbook/Documents/GitHub/platform/.agents/tasks/prd-convex-composio-assistant.json for global context (do not edit).
4. Fully audit and read all necessary files to understand the task end-to-end before implementing. Do not assume missing functionality.
5. If /Users/macbook/Documents/GitHub/platform/AGENTS.md exists, follow its build/test instructions.
6. Implement only the tasks that belong to S4.
7. Run verification commands listed in the story, the global quality gates, and in /Users/macbook/Documents/GitHub/platform/AGENTS.md (if required).
8. If the project has a build or dev workflow, run what applies:
   - Build step (e.g., `npm run build`) if defined.
   - Dev server (e.g., `npm run dev`, `wrangler dev`) if it is the normal validation path.
   - Confirm no runtime/build errors in the console.
9. Perform a brief audit before committing:
   - **Security:** check for obvious vulnerabilities or unsafe handling introduced by your changes.
   - **Performance:** check for avoidable regressions (extra queries, heavy loops, unnecessary re-renders).
   - **Regression:** verify existing behavior that could be impacted still works.
10. If No-commit is false, commit changes using the `$commit` skill.
    - Stage everything: `git add -A`
    - Confirm a clean working tree after commit: `git status --porcelain` should be empty.
    - After committing, capture the commit hash and subject using:
      `git show -s --format="%h %s" HEAD`.
11. Append a progress entry to /Users/macbook/Documents/GitHub/platform/.ralph/progress.md with run/commit/test details (format below).
    If No-commit is true, skip committing and note it in the progress entry.

## Progress Entry Format (Append Only)
```
## [Date/Time] - S4: Harden error handling and fallback UX
Thread: [codex exec session id if available, otherwise leave blank]
Run: 20260212-180835-23441 (iteration 1)
Run log: /Users/macbook/Documents/GitHub/platform/.ralph/runs/run-20260212-180835-23441-iter-1.log
Run summary: /Users/macbook/Documents/GitHub/platform/.ralph/runs/run-20260212-180835-23441-iter-1.md
- Guardrails reviewed: yes
- No-commit run: false
- Commit: <hash> <subject> (or `none` + reason)
- Post-commit status: `clean` or list remaining files
- Verification:
  - Command: <exact command> -> PASS/FAIL
  - Command: <exact command> -> PASS/FAIL
- Files changed:
  - <file path>
  - <file path>
- What was implemented
- **Learnings for future iterations:**
  - Patterns discovered
  - Gotchas encountered
  - Useful context
---
```

## Completion Signal
Only output the completion signal when the **selected story** is fully complete and verified.
When the selected story is complete, output:
<promise>COMPLETE</promise>

Otherwise, end normally without the signal.

## Additional Guardrails
- When authoring documentation, capture the why (tests + implementation intent).
- If you learn how to run/build/test the project, update /Users/macbook/Documents/GitHub/platform/AGENTS.md briefly (operational only).
- Keep AGENTS operational only; progress notes belong in /Users/macbook/Documents/GitHub/platform/.ralph/progress.md.
- If you hit repeated errors, log them in /Users/macbook/Documents/GitHub/platform/.ralph/errors.log and add a Sign to /Users/macbook/Documents/GitHub/platform/.ralph/guardrails.md using /usr/local/lib/node_modules/@iannuttall/ralph/.agents/ralph/references/GUARDRAILS.md as the template.

## Activity Logging (Required)
Log major actions to /Users/macbook/Documents/GitHub/platform/.ralph/activity.log using the helper:
```
/Users/macbook/Documents/GitHub/platform/ralph log "message"
```
Log at least:
- Start of work on the story
- After major code changes
- After tests/verification
- After updating progress log

## Browser Testing (Required for Frontend Stories)
If the selected story changes UI, you MUST verify it in the browser:
1. Load the `dev-browser` skill.
2. Navigate to the relevant page.
3. Verify the UI changes work as expected.
4. Take a screenshot if helpful for the progress log.

A frontend story is NOT complete until browser verification passes.

mcp startup: no servers
2026-02-12T12:38:36.407846Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c517b-3db1-7050-a86f-b8a19d243c0a
codex
Working S4 only: I’ll first read guardrails, prior errors, and the PRD story context, then audit the assistant/composio routes to implement unified actionable errors with safe fallback behavior and consistent sanitized logging. I’ll log each major step to `.ralph/activity.log` as required.

thinking
**Planning parallel file reads**
exec
/bin/zsh -lc '/Users/macbook/Documents/GitHub/platform/ralph log "Start S4 work: harden error handling and fallback UX"' in /Users/macbook/Documents/GitHub/platformexec
/bin/zsh -lc 'cat .ralph/guardrails.md' in /Users/macbook/Documents/GitHub/platformexec
/bin/zsh -lc 'cat .ralph/errors.log' in /Users/macbook/Documents/GitHub/platformexec
/bin/zsh -lc 'cat .agents/tasks/prd-convex-composio-assistant.json' in /Users/macbook/Documents/GitHub/platform exited 127 in 51ms:
zsh:1: no such file or directory: /Users/macbook/Documents/GitHub/platform/ralph
 succeeded in 51ms:
# Guardrails (Signs)

> Lessons learned from failures. Read before acting.

## Core Signs

### Sign: Read Before Writing
- **Trigger**: Before modifying any file
- **Instruction**: Read the file first
- **Added after**: Core principle

### Sign: Test Before Commit
- **Trigger**: Before committing changes
- **Instruction**: Run required tests and verify outputs
- **Added after**: Core principle

---

## Learned Signs

 succeeded in 52ms:
# Error Log

> Failures and repeated issues. Use this to add guardrails.

[2026-02-12 17:19:46] ITERATION 1 left uncommitted changes; review run summary at /Users/macbook/Documents/GitHub/platform/.ralph/runs/run-20260212-171007-13768-iter-1.md
[2026-02-12 17:44:17] ITERATION 1 left uncommitted changes; review run summary at /Users/macbook/Documents/GitHub/platform/.ralph/runs/run-20260212-173602-17364-iter-1.md
[2026-02-12 17:53:34] ITERATION 2 left uncommitted changes; review run summary at /Users/macbook/Documents/GitHub/platform/.ralph/runs/run-20260212-173602-17364-iter-2.md
 succeeded in 52ms:
{
  "document_type": "PRD",
  "version": "1.1",
  "status": "draft",
  "created_at": "2026-02-12",
  "title": "Proddy AI Assistant (Convex + Composio) - Codebase Aligned",
  "slug": "convex-composio-assistant",
  "request_context": "User requested a PRD for an AI assistant based on Convex DB that connects to external tools via Composio, and asked to base it on the current codebase where most parts already exist.",
  "product_summary": "Proddy already includes a Convex-backed AI assistant with conversation persistence, internal workspace tools, and Composio-powered external tool actions. This PRD defines completion criteria to move the existing implementation from feature-rich draft state to reliable production behavior.",
  "current_implementation": {
    "assistant_runtime": {
      "status": "implemented",
      "details": [
        "Conversation lifecycle and streaming are wired through `@dayhaysoos/convex-database-chat`.",
        "Assistant actions are implemented in Convex (`assistantChat.sendMessage`) with OpenAI tool-calling.",
        "Workspace assistant UI is available at `/workspace/[workspaceId]/assistant`."
      ],
      "evidence_files": [
        "convex/assistantChat.ts",
        "convex/assistantConversations.ts",

thinking
**Clarifying command path with spaces**
codex
I’ve loaded guardrails/errors/PRD and confirmed S4 scope. Next I’m locating the project’s `AGENTS.md` and the assistant/composio route files, then I’ll audit current error/fallback behavior before editing.
exec
/bin/zsh -lc 'cat AGENTS.md' in /Users/macbook/Documents/GitHub/platformexec
/bin/zsh -lc 'ls -la' in /Users/macbook/Documents/GitHub/platformexec
/bin/zsh -lc "rg --files | rg 'assistant|composio|error|chatbot|audit'" in /Users/macbook/Documents/GitHub/platform exited 1 in 51ms:
cat: AGENTS.md: No such file or directory
 succeeded in 51ms:
total 2320
drwxr-xr-x@  34 macbook  staff    1088 Feb 12 17:14 .
drwxr-xr-x@   9 macbook  staff     288 Feb 12 12:45 ..
-rw-r--r--@   1 macbook  staff    8196 Feb  4 09:25 .DS_Store
drwxr-xr-x@   4 macbook  staff     128 Feb 12 17:05 .agents
-rw-r--r--@   1 macbook  staff      88 Jan 23 15:09 .deepsource.toml
-rw-r--r--@   1 macbook  staff     243 Feb  6 19:12 .env.convex.example
-rw-r--r--@   1 macbook  staff    2335 Feb  7 12:25 .env.local
-rw-r--r--@   1 macbook  staff     808 Feb 10 11:13 .env.next.example
drwxr-xr-x@  16 macbook  staff     512 Feb 12 17:53 .git
drwxr-xr-x@   4 macbook  staff     128 Jan 23 15:09 .github
-rw-r--r--@   1 macbook  staff     445 Feb  6 19:12 .gitignore
drwxr-xr-x@  20 macbook  staff     640 Feb 12 17:51 .next
drwxr-xr-x@   8 macbook  staff     256 Feb 12 17:31 .ralph
-rw-r--r--@   1 macbook  staff    3428 Feb  1 13:47 README.md
-rw-r--r--@   1 macbook  staff    2682 Feb 10 18:21 biome.json
-rw-r--r--@   1 macbook  staff  367894 Feb 11 22:09 bun.lock
drwxr-xr-x@   4 macbook  staff     128 Feb 11 13:49 certificates
-rw-r--r--@   1 macbook  staff    2214 Jan 23 15:09 coderabbit.yaml
-rw-r--r--@   1 macbook  staff     391 Jan 23 15:09 components.json
 succeeded in 50ms:
src/lib/composio-config.ts
src/lib/composio.ts
src/lib/assistant-orchestration.ts
src/lib/assistant-tool-audit.ts
docs/assistant-orchestration.md
convex/assistantTools.ts
convex/chatbot.ts
src/app/global-error.tsx
public/assistant.png
src/app/assistant/page.tsx
src/app/assistant/layout.tsx
convex/assistantConversations.ts
convex/assistantComposioTools.ts
convex/chatbotQueries.ts
convex/assistantToolAudits.ts
convex/assistantChat.ts
src/app/mockup/components/test-dashboard-chatbot.tsx
src/features/landing/assistant/FeaturesSection.tsx
src/features/landing/assistant/HeroSection.tsx
src/features/landing/assistant/FAQSection.tsx

thinking
**Inspecting relevant files**
exec
/bin/zsh -lc 'ls -la ralph*' in /Users/macbook/Documents/GitHub/platform exited 1 in 51ms:
zsh:1: no matches found: ralph*

thinking
**Investigating executable path issue**
exec
/bin/zsh -lc "find . -maxdepth 3 -name 'ralph' -o -name 'ralph*'" in /Users/macbook/Documents/GitHub/platform succeeded in 245ms:
./.agents/ralph
./.agents/ralph/ralph.webp

thinking
**Inspecting agent log directory**
codex
I found no root-level `AGENTS.md`, and the prescribed `ralph log` helper binary/path is missing in this repo. I’m proceeding with the story implementation and will append required activity entries directly to `.ralph/activity.log` to satisfy the logging requirement.

thinking
**Inspecting assistant and composio routes**
exec
/bin/zsh -lc "sed -n '1,260p' src/lib/composio.ts" in /Users/macbook/Documents/GitHub/platformexec
/bin/zsh -lc "sed -n '1,260p' src/app/api/assistant/composio/route.ts" in /Users/macbook/Documents/GitHub/platformexec
/bin/zsh -lc "sed -n '1,260p' src/app/api/assistant/chatbot/route.ts" in /Users/macbook/Documents/GitHub/platformexec
/bin/zsh -lc "sed -n '1,260p' src/app/api/assistant/route.ts" in /Users/macbook/Documents/GitHub/platform succeeded in 52ms:
import { type NextRequest, NextResponse } from "next/server";
import {
	APP_CONFIGS,
	AVAILABLE_APPS,
	type AvailableApp,
	createComposioClient,
	getConnectedApps,
	initiateAppConnection,
} from "@/lib/composio-config";

export async function GET(req: NextRequest) {
	try {
		const { searchParams } = new URL(req.url);
		const action = searchParams.get("action");
		const workspaceId = searchParams.get("workspaceId");

		if (!workspaceId) {
			return NextResponse.json(
				{ error: "workspaceId is required" },
				{ status: 400 }
 succeeded in 52ms:
import { Composio } from "@composio/core";
import { OpenAIProvider } from "@composio/openai";
import OpenAI from "openai";

/**
 * Represents a Composio connection with properties that may vary across SDK versions
 */
interface ComposioConnection {
	id?: string;
	connectionId?: string;
	redirectUrl?: string;
	authUrl?: string;
}

/**
 * Result type for connection deletion operations
 */
type ConnectedAccountDeleteResult = boolean | undefined | { success: boolean };

if (!process.env.OPENAI_API_KEY) {
 succeeded in 50ms:
import type { Composio } from "@composio/core";
import {
	convexAuthNextjsToken,
	isAuthenticatedNextjs,
} from "@convex-dev/auth/nextjs/server";
import { ConvexHttpClient } from "convex/browser";
import { type NextRequest, NextResponse } from "next/server";
import OpenAI from "openai";
import { api } from "@/../convex/_generated/api";
import type { Id } from "@/../convex/_generated/dataModel";
import {
	buildAssistantResponseMetadata,
	buildAssistantSystemPrompt,
	classifyAssistantQuery,
} from "@/lib/assistant-orchestration";
import { parseAndSanitizeArguments } from "@/lib/assistant-tool-audit";
import {
	type AvailableApp,
	createComposioClient,
	filterToolsForQuery,
 succeeded in 51ms:
import { type NextRequest, NextResponse } from "next/server";

// Redirect to the chatbot endpoint
export async function POST(req: NextRequest) {
	try {
		// Get the request body
		const body = await req.json();

		// Forward auth context (cookies/authorization) so the downstream route can
		// derive the Convex auth token and run authenticated queries.
		const cookie = req.headers.get("cookie");
		const authorization = req.headers.get("authorization");

		// Forward the request to the chatbot endpoint
		const chatbotResponse = await fetch(
			`${req.nextUrl.origin}/api/assistant/chatbot`,
			{
				method: "POST",
				headers: {
					"Content-Type": "application/json",
exec
/bin/zsh -lc "sed -n '261,620p' src/app/api/assistant/chatbot/route.ts" in /Users/macbook/Documents/GitHub/platform succeeded in 51ms:
				composioFallbackReason = "composio_initialization_failed";
				console.warn(
					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
				);
			}
		} else if (needsExternalTools) {
			composioFallbackReason = "composio_not_configured";
		}

		// If Composio should be used, handle with OpenAI + Composio tools
		if (useComposio && composioTools.length > 0 && composioClient) {
			try {
				const openai = createOpenAIClient();
				// Reuse the composio client that already has userId context
				// userId is already set from the previous block

				// Build messages array
				// Sanitize conversation history to prevent system prompt injection
				const sanitizedHistory = (conversationHistory || [])
					.filter((msg: any) => {
exec
/bin/zsh -lc "sed -n '621,760p' src/app/api/assistant/chatbot/route.ts" in /Users/macbook/Documents/GitHub/platform succeeded in 52ms:
			{
				success: false,
				error: error instanceof Error ? error.message : "Unknown error",
			},
			{ status: 500 }
		);
	}
}

thinking
**Inspecting route consistency**
codex
I’ve identified substantial inconsistency in current route-level error handling (raw `error.message` exposure and uneven fallback messaging). I’m now auditing the rest of Composio endpoints and any shared helpers to implement a single sanitized, actionable pattern without broad scope creep.
exec
/bin/zsh -lc "sed -n '1,340p' src/app/api/assistant/composio/agentauth/route.ts" in /Users/macbook/Documents/GitHub/platformexec
/bin/zsh -lc "sed -n '1,260p' src/app/api/assistant/composio/status/route.ts" in /Users/macbook/Documents/GitHub/platformexec
/bin/zsh -lc "sed -n '1,320p' src/app/api/assistant/composio/tools/route.ts" in /Users/macbook/Documents/GitHub/platformexec
/bin/zsh -lc "sed -n '1,320p' src/lib/composio-config.ts" in /Users/macbook/Documents/GitHub/platform succeeded in 51ms:
import { type NextRequest, NextResponse } from "next/server";
import OpenAI from "openai";
import { createComposioClient } from "@/lib/composio-config";

// Initialize OpenAI client
const openai = new OpenAI({
	apiKey: process.env.OPENAI_API_KEY,
});

// Get Composio tools for OpenAI
export async function POST(req: NextRequest) {
	try {
		// Check for required environment variable early
		if (!process.env.OPENAI_API_KEY) {
			return NextResponse.json(
				{ error: "OPENAI_API_KEY is not configured" },
				{ status: 500 }
			);
		}

 succeeded in 51ms:
import { unstable_noStore as noStore } from "next/cache";
import { type NextRequest, NextResponse } from "next/server";
import {
	type AvailableApp,
	createComposioClient,
	getAllToolsForApps,
	getAnyConnectedApps,
} from "@/lib/composio-config";

export const dynamic = "force-dynamic";
export const fetchCache = "force-no-store";
export const revalidate = 0;

/**
 * Handle GET requests to report connected apps and total available tools for a workspace or member.
 *
 * Returns a JSON response describing connected apps and the total tool count for the resolved entity (member if `memberId` is provided, otherwise workspace). Requires a `workspaceId` query parameter; an optional `memberId` query parameter narrows the entity to a member. If `workspaceId` is missing the handler responds with HTTP 400 and an error message. On success the payload includes `success`, `connected`, `totalTools`, `workspaceId`, `memberId`, `entityId`, and `timestamp`. On unexpected errors the handler responds with HTTP 500 and a payload containing `success: false`, an `error` message, and empty `connected`/`totalTools`.
 *
 * @returns JSON payload describing connection status and tool count for the requested entity.
 */
 succeeded in 51ms:
import {
	convexAuthNextjsToken,
	isAuthenticatedNextjs,
} from "@convex-dev/auth/nextjs/server";
import { ConvexHttpClient } from "convex/browser";
import { type NextRequest, NextResponse } from "next/server";
import { api } from "@/../convex/_generated/api";
import type { Id } from "@/../convex/_generated/dataModel";
import { initializeComposio } from "@/lib/composio";

const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);

// Validate composioAuthConfigId format
const _validateAuthConfigFormat = (composioAuthConfigId: string): boolean => {
	// Accept any valid UUID or identifier format from Composio API
	return Boolean(composioAuthConfigId && composioAuthConfigId.length > 0);
};

/**
 * Verify that the currently authenticated user owns the specified member.
 succeeded in 51ms:
import { Composio } from "@composio/core";
import { OpenAIProvider } from "@composio/openai";
import { logger } from "./logger";

// Type definitions for Composio tools
export interface ComposioTool {
	name?: string;
	description?: string;
	function?: {
		name: string;
		description?: string;
		parameters?: Record<string, unknown>;
	};
	toolkit?: string;
	app?: string;
	_originalName?: string;
	priority?: number;
}

export interface ComposioConnection {

thinking
**Inspecting agentauth GET continuation**
exec
/bin/zsh -lc "sed -n '340,760p' src/app/api/assistant/composio/agentauth/route.ts" in /Users/macbook/Documents/GitHub/platform succeeded in 52ms:

		// Fetch auth configs and connected accounts for workspace
		if (action === "fetch-data" && workspaceId) {
			const memberId = searchParams.get("memberId"); // Optional: filter by member

			try {
				// Fetch auth configs from database (member-specific if memberId provided)
				const authConfigs = await convex.query(
					api.integrations.getAuthConfigsPublic,
					{
						workspaceId: workspaceId as Id<"workspaces">,
						memberId: memberId ? (memberId as Id<"members">) : undefined,
					}
				);

				// UPDATED: Fetch real connected accounts from Composio using member-specific entity ID
				const { createComposioClient, getAnyConnectedApps } = await import(
					"@/lib/composio-config"
				);
				const composioClient = createComposioClient();

thinking
**Inspecting existing logger utility**
exec
/bin/zsh -lc "sed -n '1,260p' src/lib/logger.ts" in /Users/macbook/Documents/GitHub/platform succeeded in 51ms:
// Simple logger utility to replace console usage in production code
export const logger = {
	debug: (message: string, ...args: unknown[]) => {
		if (process.env.NODE_ENV === "development") {
			console.debug(`[DEBUG] ${message}`, ...args);
		}
	},

	info: (message: string, ...args: unknown[]) => {
		if (process.env.NODE_ENV === "development") {
			console.log(`[INFO] ${message}`, ...args);
		}
	},

	warn: (message: string, ...args: unknown[]) => {
		console.warn(`[WARN] ${message}`, ...args);
	},

	error: (message: string, ...args: unknown[]) => {
		console.error(`[ERROR] ${message}`, ...args);

thinking
**Searching sanitization utilities**
exec
/bin/zsh -lc "sed -n '1,260p' src/lib/assistant-orchestration.ts" in /Users/macbook/Documents/GitHub/platformexec
/bin/zsh -lc 'rg "sanitize|redact|actionable|fallback" src/app/api/assistant src/lib -n' in /Users/macbook/Documents/GitHub/platform succeeded in 51ms:
export const ASSISTANT_METADATA_SCHEMA_VERSION = "v1";

export type AssistantExternalApp =
	| "GMAIL"
	| "GITHUB"
	| "SLACK"
	| "NOTION"
	| "CLICKUP"
	| "LINEAR";

export type AssistantExecutionPath =
	| "convex-assistant"
	| "nextjs-openai-composio";

export type AssistantQueryMode = "internal" | "external" | "hybrid";

export type AssistantResponseMetadata = {
	schemaVersion: typeof ASSISTANT_METADATA_SCHEMA_VERSION;
	assistantType: "convex" | "openai-composio";
	executionPath: AssistantExecutionPath;
 succeeded in 51ms:
src/lib/composio-config.ts:710:// API fallback mapping - when dashboard tools aren't available, use these alternatives
src/lib/composio-config.ts:723:		"GITHUB_AUTH_USER_DOCKER_CONFLICT_PACKAGES_LIST", // Any auth user tool as fallback
src/lib/composio-config.ts:1134:		// Also check for API fallbacks for missing dashboard tools
src/lib/composio-config.ts:1143:		const fallbackMatches: any[] = [];
src/lib/composio-config.ts:1145:			const fallbacks = API_TOOL_FALLBACKS[missingTool] || [];
src/lib/composio-config.ts:1146:			fallbacks.forEach((fallback) => {
src/lib/composio-config.ts:1148:					(tool) => tool.name === fallback || tool._originalName === fallback
src/lib/composio-config.ts:1150:				if (match && !fallbackMatches.includes(match)) {
src/lib/composio-config.ts:1151:					fallbackMatches.push(match);
src/lib/composio-config.ts:1156:		filteredTools = [...dashboardMatches, ...fallbackMatches];
src/lib/composio-config.ts:1354: * @param entityId - Optional explicit entity id to check (for example `member_123` or `workspace_456`); when provided, global fallback is not used.
src/lib/composio-config.ts:1392:			// Only fallback if no specific entityId was requested
src/lib/composio-config.ts:1403:		// Prioritize entity-specific connections, use global only as fallback
src/lib/assistant-tool-audit.ts:7:function sanitizeString(input: string): string {
src/lib/assistant-tool-audit.ts:17:export function sanitizeAuditPayload(
src/lib/assistant-tool-audit.ts:35:		return sanitizeString(value);
src/lib/assistant-tool-audit.ts:48:			sanitizeAuditPayload(item, depth + 1, parentKey)
src/lib/assistant-tool-audit.ts:54:		const sanitized: Record<string, unknown> = {};
src/lib/assistant-tool-audit.ts:56:			sanitized[key] = sanitizeAuditPayload(childValue, depth + 1, key);
src/lib/assistant-tool-audit.ts:58:		return sanitized;

thinking
**Considering reuse from audit tool**
exec
/bin/zsh -lc "sed -n '1,220p' src/lib/assistant-tool-audit.ts" in /Users/macbook/Documents/GitHub/platform succeeded in 51ms:
const REDACTED_VALUE = "[REDACTED]";
const MAX_DEPTH = 6;
const MAX_STRING_LENGTH = 2000;
const SENSITIVE_KEY_PATTERN =
	/(^|_|-)(token|secret|password|passphrase|api[_-]?key|authorization|cookie|credential|private[_-]?key|access[_-]?token|refresh[_-]?token|client[_-]?secret)(_|-|$)/i;

function sanitizeString(input: string): string {
	return input
		.replace(/(Bearer\s+)[^\s]+/gi, `$1${REDACTED_VALUE}`)
		.replace(
			/(token|secret|password|api[_-]?key)\s*[:=]\s*["']?[^"',\s}]+/gi,
			`$1=${REDACTED_VALUE}`
		)
		.slice(0, MAX_STRING_LENGTH);
}

export function sanitizeAuditPayload(
	value: unknown,
	depth = 0,
	parentKey = ""

thinking
**Planning unified error handling**
exec
/bin/zsh -lc 'git status --short' in /Users/macbook/Documents/GitHub/platform succeeded in 51ms:
 M .agents/tasks/prd-convex-composio-assistant.json
 M .ralph/activity.log
 M .ralph/errors.log
 M .ralph/runs/run-20260212-173602-17364-iter-2.log
?? .ralph/.tmp/prompt-20260212-180835-23441-1.md
?? .ralph/.tmp/story-20260212-180835-23441-1.json
?? .ralph/.tmp/story-20260212-180835-23441-1.md
?? .ralph/runs/run-20260212-173602-17364-iter-2.md
?? .ralph/runs/run-20260212-180835-23441-iter-1.log

thinking
**Committing all changes including preexisting modifications**
exec
/bin/zsh -lc "printf '[%s] S4 start: reviewed guardrails/errors/PRD and began route audit\\n' \""'$(date -u '"'+%Y-%m-%d %H:%M:%S UTC')\" >> .ralph/activity.log" in /Users/macbook/Documents/GitHub/platform succeeded in 52ms:


thinking
**Inspecting error handling utilities**
exec
/bin/zsh -lc "rg \"NextResponse.json\\(\\s*\\{["'^'"\\n]*error|console\\.(error|warn)\" src/app/api/assistant -n" in /Users/macbook/Documents/GitHub/platform succeeded in 51ms:
src/app/api/assistant/composio/route.ts:44:		console.error("Composio API error:", error);
src/app/api/assistant/composio/route.ts:95:				return NextResponse.json({ error: result.error }, { status: 400 });
src/app/api/assistant/composio/route.ts:104:		console.error("Composio API error:", error);
src/app/api/assistant/composio/status/route.ts:65:				console.warn("[Connections Status] Failed to get tool count:", error);
src/app/api/assistant/composio/status/route.ts:81:		console.error("[Connections Status] Error:", error);
src/app/api/assistant/route.ts:33:		console.error("[Assistant Router] Error:", error);
src/app/api/assistant/composio/tools/route.ts:45:					console.warn(`No tools found for app ${appName}:`, error);
src/app/api/assistant/composio/tools/route.ts:49:			console.error("Error fetching tools:", error);
src/app/api/assistant/composio/tools/route.ts:104:						console.error("Tool execution error:", error);
src/app/api/assistant/composio/tools/route.ts:155:		console.error("[Composio Tools] Error:", error);
src/app/api/assistant/composio/tools/route.ts:196:					console.warn(`No tools found for app ${appName}:`, error);
src/app/api/assistant/composio/tools/route.ts:205:				console.warn("No tools found for entity:", error);
src/app/api/assistant/composio/tools/route.ts:221:		console.error("[Composio Tools] GET Error:", error);
src/app/api/assistant/composio/agentauth/route.ts:53:			response: NextResponse.json({ error: "User not found" }, { status: 404 }),
src/app/api/assistant/composio/agentauth/route.ts:114:				console.error("[AgentAuth] Missing memberId for authorization");
src/app/api/assistant/composio/agentauth/route.ts:137:					console.error("No redirect URL received from Composio:", connection);
src/app/api/assistant/composio/agentauth/route.ts:165:							console.warn(
src/app/api/assistant/composio/agentauth/route.ts:170:						console.warn("Failed to store auth config:", error);
src/app/api/assistant/composio/agentauth/route.ts:181:				console.error("Authorization error:", error);
src/app/api/assistant/composio/agentauth/route.ts:194:				console.error("[AgentAuth] Missing memberId for connection completion");

thinking
**Assessing build impact and scope**
exec
/bin/zsh -lc 'cat package.json' in /Users/macbook/Documents/GitHub/platform succeeded in 52ms:
{
	"name": "proddy",
	"version": "1.0.1",
	"private": true,
	"packageManager": "bun@1.3.6",
	"scripts": {
		"next": "next dev --experimental-https",
		"convex": "convex dev",
		"type": "tsc --noEmit",
		"check": "biome check --write . --unsafe",
		"start": "next start",
		"build": "next build"
	},
	"author": {
		"name": "ProddyAI",
		"url": "https://github.com/ProddyAI"
	},
	"description": "Collaborate with your team using real-time messaging in this app built with Next.js, Convex, and Shadcn UI.",
	"keywords": [
		"reactjs",

thinking
**Designing centralized error handling helper**
codex
I’ve finished the audit and found the key gaps: raw error details leak to clients in multiple routes, inconsistent logging includes unsanitized error objects, and fallback messaging is uneven. I’m now adding a shared assistant/composio error utility and wiring it into the assistant/composio API routes so failures are actionable, sanitized, and recover with usable fallback responses.

thinking
**Creating new utility file**
file update
A /Users/macbook/Documents/GitHub/platform/src/lib/assistant-error-utils.ts
import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";

const REDACTED = "[REDACTED]";
const MAX_ERROR_MESSAGE_LENGTH = 280;
const SENSITIVE_VALUE_PATTERN =
	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;

type ErrorLike = {
	name?: string;
	message?: string;
	stack?: string;
	code?: string;
	status?: number;
};

export function sanitizeErrorMessage(input: string): string {
	return input
		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
			if (args[1]) {
				return `${args[1]}${REDACTED}`;
			}
			if (args[2]) {
				return `${args[2]}${REDACTED}`;
			}
			return REDACTED;
		})
		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
}

function normalizeError(error: unknown): {
	name: string;
	message: string;
	code?: string;
	stack?: string;
} {
	const err = (error ?? {}) as ErrorLike;
	const message =
		typeof err.message === "string" && err.message.trim().length > 0
			? err.message
			: "Unknown error";
	return {
		name: typeof err.name === "string" ? err.name : "Error",
		message: sanitizeErrorMessage(message),
		code: typeof err.code === "string" ? err.code : undefined,
		stack:
			typeof err.stack === "string"
				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
				: undefined,
	};
}

export function logRouteError(params: {
	route: string;
	stage: string;
	error: unknown;
	context?: Record<string, unknown>;
	level?: "warn" | "error";
}) {
	const payload = {
		stage: params.stage,
		error: normalizeError(params.error),
		context: sanitizeAuditPayload(params.context ?? {}),
	};
	if (params.level === "warn") {
		console.warn(`[${params.route}] ${params.stage}`, payload);
		return;
	}
	console.error(`[${params.route}] ${params.stage}`, payload);
}

export function buildActionableErrorPayload(params: {
	message: string;
	nextStep: string;
	code: string;
	recoverable?: boolean;
	fallbackResponse?: string;
}): {
	success: false;
	error: string;
	nextStep: string;
	code: string;
	recoverable: boolean;
	fallbackResponse?: string;
} {
	return {
		success: false,
		error: params.message,
		nextStep: params.nextStep,
		code: params.code,
		recoverable: params.recoverable ?? false,
		fallbackResponse: params.fallbackResponse,
	};
}

export function buildComposioFailureGuidance(): string {
	return "Check your connected integrations in Assistant settings, then retry.";
}

export function buildRecoverableAssistantFallback(reason?: string): string {
	const base =
		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
	if (!reason) {
		return `${base} Try again in a moment or reconnect the integration.`;
	}
	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
}
apply_patch(auto_approved=true) exited 0 in 35ms:
Success. Updated the following files:
A src/lib/assistant-error-utils.ts
file update:
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}

file update:
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Planning incremental patch**
file update
M /Users/macbook/Documents/GitHub/platform/src/app/api/assistant/chatbot/route.ts
@@ -30,2 +30,8 @@
 } from "@/lib/high-impact-action-confirmation";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
@@ -91,6 +97,8 @@
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
@@ -133,5 +141,10 @@
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error(
+						"Authenticated session but no Convex token found"
+					),
+					level: "warn",
+				});
 			}
@@ -139,6 +152,8 @@
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
@@ -261,5 +276,10 @@
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
@@ -445,5 +465,10 @@
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
@@ -471,6 +496,7 @@
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
@@ -497,4 +523,3 @@
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
@@ -524,6 +549,8 @@
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
@@ -605,11 +632,47 @@
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
+				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
 			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
-				},
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
@@ -618,8 +681,14 @@
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
apply_patch(auto_approved=true) exited 0 in 57ms:
Success. Updated the following files:
M src/app/api/assistant/chatbot/route.ts
file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..6bb2674751d2195f373518a5969658c52d0df005
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -28,6 +28,12 @@
 	getHighImpactToolNames,
 	getUserConfirmationDecision,
 } from "@/lib/high-impact-action-confirmation";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 export const dynamic = "force-dynamic";
 
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,23 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error(
+						"Authenticated session but no Convex token found"
+					),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +274,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +463,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +494,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +521,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +547,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +630,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
+				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
 			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
-				},
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}

file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..6bb2674751d2195f373518a5969658c52d0df005
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -28,6 +28,12 @@
 	getHighImpactToolNames,
 	getUserConfirmationDecision,
 } from "@/lib/high-impact-action-confirmation";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 export const dynamic = "force-dynamic";
 
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,23 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error(
+						"Authenticated session but no Convex token found"
+					),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +274,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +463,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +494,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +521,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +547,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +630,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
+				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
 			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
-				},
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Checking empty connected apps handling**
codex
I’m applying the same sanitized/actionable error pattern to the wrapper and Composio endpoints next, so both assistant and composio routes return consistent client messages and avoid leaking raw exception content.
file update
M /Users/macbook/Documents/GitHub/platform/src/app/api/assistant/route.ts
@@ -1,2 +1,6 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
@@ -32,8 +36,13 @@
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep: "Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
apply_patch(auto_approved=true) exited 0 in 79ms:
Success. Updated the following files:
M src/app/api/assistant/route.ts
file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..6bb2674751d2195f373518a5969658c52d0df005
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -28,6 +28,12 @@
 	getHighImpactToolNames,
 	getUserConfirmationDecision,
 } from "@/lib/high-impact-action-confirmation";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 export const dynamic = "force-dynamic";
 
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,23 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error(
+						"Authenticated session but no Convex token found"
+					),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +274,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +463,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +494,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +521,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +547,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +630,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
+				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
 			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
-				},
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..4cfcaa69e375d5798c11fe0289af31bac7b72408
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,17 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep: "Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}

file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..6bb2674751d2195f373518a5969658c52d0df005
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -28,6 +28,12 @@
 	getHighImpactToolNames,
 	getUserConfirmationDecision,
 } from "@/lib/high-impact-action-confirmation";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 export const dynamic = "force-dynamic";
 
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,23 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error(
+						"Authenticated session but no Convex token found"
+					),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +274,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +463,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +494,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +521,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +547,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +630,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
+				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
 			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
-				},
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..4cfcaa69e375d5798c11fe0289af31bac7b72408
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,17 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep: "Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}

file update
M /Users/macbook/Documents/GitHub/platform/src/app/api/assistant/composio/route.ts
@@ -9,2 +9,7 @@
 } from "@/lib/composio-config";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 
@@ -43,8 +48,14 @@
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
@@ -94,3 +105,14 @@
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
@@ -103,8 +125,14 @@
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
apply_patch(auto_approved=true) exited 0 in 98ms:
Success. Updated the following files:
M src/app/api/assistant/composio/route.ts
file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..6bb2674751d2195f373518a5969658c52d0df005
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -28,6 +28,12 @@
 	getHighImpactToolNames,
 	getUserConfirmationDecision,
 } from "@/lib/high-impact-action-confirmation";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 export const dynamic = "force-dynamic";
 
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,23 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error(
+						"Authenticated session but no Convex token found"
+					),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +274,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +463,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +494,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +521,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +547,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +630,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
+				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
 			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
-				},
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..81d280bef5a01d09f4005a43532ba3defdf054ea
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -7,6 +7,11 @@
 	getConnectedApps,
 	initiateAppConnection,
 } from "@/lib/composio-config";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 
 export async function GET(req: NextRequest) {
 	try {
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..4cfcaa69e375d5798c11fe0289af31bac7b72408
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,17 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep: "Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}

file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..6bb2674751d2195f373518a5969658c52d0df005
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -28,6 +28,12 @@
 	getHighImpactToolNames,
 	getUserConfirmationDecision,
 } from "@/lib/high-impact-action-confirmation";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 export const dynamic = "force-dynamic";
 
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,23 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error(
+						"Authenticated session but no Convex token found"
+					),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +274,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +463,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +494,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +521,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +547,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +630,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
+				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
 			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
-				},
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..81d280bef5a01d09f4005a43532ba3defdf054ea
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -7,6 +7,11 @@
 	getConnectedApps,
 	initiateAppConnection,
 } from "@/lib/composio-config";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 
 export async function GET(req: NextRequest) {
 	try {
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..4cfcaa69e375d5798c11fe0289af31bac7b72408
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,17 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep: "Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Advancing status route implementation**
file update
M /Users/macbook/Documents/GitHub/platform/src/app/api/assistant/composio/status/route.ts
@@ -8,2 +8,6 @@
 } from "@/lib/composio-config";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
@@ -64,3 +68,8 @@
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
@@ -80,7 +89,16 @@
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
apply_patch(auto_approved=true) exited 0 in 122ms:
Success. Updated the following files:
M src/app/api/assistant/composio/status/route.ts
file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..6bb2674751d2195f373518a5969658c52d0df005
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -28,6 +28,12 @@
 	getHighImpactToolNames,
 	getUserConfirmationDecision,
 } from "@/lib/high-impact-action-confirmation";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 export const dynamic = "force-dynamic";
 
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,23 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error(
+						"Authenticated session but no Convex token found"
+					),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +274,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +463,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +494,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +521,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +547,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +630,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
+				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
 			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
-				},
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..81d280bef5a01d09f4005a43532ba3defdf054ea
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -7,6 +7,11 @@
 	getConnectedApps,
 	initiateAppConnection,
 } from "@/lib/composio-config";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 
 export async function GET(req: NextRequest) {
 	try {
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..1d20dda99d974296cc03b6db2ac797c26d348c29
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -6,6 +6,10 @@
 	getAllToolsForApps,
 	getAnyConnectedApps,
 } from "@/lib/composio-config";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 export const dynamic = "force-dynamic";
 export const fetchCache = "force-no-store";
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..4cfcaa69e375d5798c11fe0289af31bac7b72408
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,17 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep: "Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}

file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..6bb2674751d2195f373518a5969658c52d0df005
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -28,6 +28,12 @@
 	getHighImpactToolNames,
 	getUserConfirmationDecision,
 } from "@/lib/high-impact-action-confirmation";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 export const dynamic = "force-dynamic";
 
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,23 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error(
+						"Authenticated session but no Convex token found"
+					),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +274,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +463,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +494,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +521,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +547,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +630,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
+				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
 			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
-				},
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..81d280bef5a01d09f4005a43532ba3defdf054ea
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -7,6 +7,11 @@
 	getConnectedApps,
 	initiateAppConnection,
 } from "@/lib/composio-config";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 
 export async function GET(req: NextRequest) {
 	try {
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..1d20dda99d974296cc03b6db2ac797c26d348c29
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -6,6 +6,10 @@
 	getAllToolsForApps,
 	getAnyConnectedApps,
 } from "@/lib/composio-config";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 export const dynamic = "force-dynamic";
 export const fetchCache = "force-no-store";
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..4cfcaa69e375d5798c11fe0289af31bac7b72408
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,17 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep: "Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Preparing careful large patch**
file update
M /Users/macbook/Documents/GitHub/platform/src/app/api/assistant/composio/tools/route.ts
@@ -2,2 +2,8 @@
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
@@ -44,3 +50,9 @@
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
@@ -48,3 +60,7 @@
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
@@ -103,6 +119,13 @@
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
@@ -154,8 +177,14 @@
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
@@ -195,3 +224,9 @@
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
@@ -204,3 +239,9 @@
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
@@ -220,8 +261,15 @@
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
apply_patch(auto_approved=true) exited 0 in 144ms:
Success. Updated the following files:
M src/app/api/assistant/composio/tools/route.ts
file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..6bb2674751d2195f373518a5969658c52d0df005
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -28,6 +28,12 @@
 	getHighImpactToolNames,
 	getUserConfirmationDecision,
 } from "@/lib/high-impact-action-confirmation";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 export const dynamic = "force-dynamic";
 
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,23 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error(
+						"Authenticated session but no Convex token found"
+					),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +274,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +463,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +494,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +521,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +547,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +630,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
+				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
 			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
-				},
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..81d280bef5a01d09f4005a43532ba3defdf054ea
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -7,6 +7,11 @@
 	getConnectedApps,
 	initiateAppConnection,
 } from "@/lib/composio-config";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 
 export async function GET(req: NextRequest) {
 	try {
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..1d20dda99d974296cc03b6db2ac797c26d348c29
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -6,6 +6,10 @@
 	getAllToolsForApps,
 	getAnyConnectedApps,
 } from "@/lib/composio-config";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 export const dynamic = "force-dynamic";
 export const fetchCache = "force-no-store";
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..4cfcaa69e375d5798c11fe0289af31bac7b72408
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,17 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep: "Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}

file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..6bb2674751d2195f373518a5969658c52d0df005
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -28,6 +28,12 @@
 	getHighImpactToolNames,
 	getUserConfirmationDecision,
 } from "@/lib/high-impact-action-confirmation";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 export const dynamic = "force-dynamic";
 
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,23 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error(
+						"Authenticated session but no Convex token found"
+					),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +274,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +463,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +494,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +521,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +547,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +630,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
+				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
 			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
-				},
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..81d280bef5a01d09f4005a43532ba3defdf054ea
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -7,6 +7,11 @@
 	getConnectedApps,
 	initiateAppConnection,
 } from "@/lib/composio-config";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 
 export async function GET(req: NextRequest) {
 	try {
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..1d20dda99d974296cc03b6db2ac797c26d348c29
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -6,6 +6,10 @@
 	getAllToolsForApps,
 	getAnyConnectedApps,
 } from "@/lib/composio-config";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 export const dynamic = "force-dynamic";
 export const fetchCache = "force-no-store";
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..4cfcaa69e375d5798c11fe0289af31bac7b72408
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,17 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep: "Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Standardizing error handling**
file update
M /Users/macbook/Documents/GitHub/platform/src/app/api/assistant/composio/agentauth/route.ts
@@ -8,2 +8,8 @@
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
@@ -113,3 +119,8 @@
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
@@ -136,5 +147,16 @@
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
@@ -164,8 +186,18 @@
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
@@ -180,7 +212,18 @@
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
@@ -193,3 +236,8 @@
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
@@ -288,3 +336,9 @@
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
@@ -298,7 +352,18 @@
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
@@ -310,5 +375,13 @@
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
@@ -394,3 +467,9 @@
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
@@ -416,3 +495,9 @@
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
@@ -430,3 +515,9 @@
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
@@ -454,7 +545,18 @@
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
@@ -473,5 +575,13 @@
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep: "Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
@@ -519,9 +629,7 @@
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
@@ -542,13 +650,15 @@
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
@@ -564,9 +674,13 @@
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
apply_patch(auto_approved=true) exited 0 in 164ms:
Success. Updated the following files:
M src/app/api/assistant/composio/agentauth/route.ts
file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..6bb2674751d2195f373518a5969658c52d0df005
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -28,6 +28,12 @@
 	getHighImpactToolNames,
 	getUserConfirmationDecision,
 } from "@/lib/high-impact-action-confirmation";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 export const dynamic = "force-dynamic";
 
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,23 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error(
+						"Authenticated session but no Convex token found"
+					),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +274,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +463,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +494,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +521,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +547,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +630,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
+				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
 			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
-				},
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6da2e22ee6673d76a2e2ee70785c5fef43..2d476efc5e1b9fe7c44e03119a247f22e49ed839
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -134,9 +145,20 @@
 				const redirectUrl = connection.redirectUrl;
 
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
 					);
 				}
@@ -162,12 +184,22 @@
 								createdBy: memberId as Id<"members">,
 							});
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -178,11 +210,22 @@
 					message: `Redirect user to ${toolkit} authorization`,
 				});
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
 				);
 			}
@@ -191,7 +234,12 @@
 		if (action === "complete") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -286,7 +334,13 @@
 							connectedBy: memberId as Id<"members">,
 						});
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -296,11 +350,22 @@
 					message: `${toolkit} connected successfully`,
 				});
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -308,9 +373,17 @@
 
 		return NextResponse.json({ error: "Invalid action" }, { status: 400 });
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -392,7 +465,13 @@
 					connectedAccounts,
 				});
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
 				return NextResponse.json({
 					success: true,
@@ -414,7 +493,13 @@
 					account: connectedAccount,
 				});
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
 					connected: false,
 					status: "NOT_FOUND",
@@ -428,7 +513,13 @@
 			// Validate userId format (should be member_{memberId})
 			const memberIdPattern = /^member_[A-Za-z0-9-_]+$/;
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
 					{
 						error: "Invalid userId format. Expected format: member_{memberId}",
@@ -452,11 +543,22 @@
 					entityId,
 				});
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -471,9 +573,17 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep: "Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -517,13 +627,11 @@
 			await apiClient.deleteConnection(composioAccountId);
 			composioDeleteSuccess = true;
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
 			// Continue to delete from database even if Composio delete fails
 		}
@@ -540,17 +648,19 @@
 					memberId: memberId as Id<"members">,
 				});
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
 				);
 			}
@@ -562,13 +672,17 @@
 			composioDeleted: composioDeleteSuccess,
 		});
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..81d280bef5a01d09f4005a43532ba3defdf054ea
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -7,6 +7,11 @@
 	getConnectedApps,
 	initiateAppConnection,
 } from "@/lib/composio-config";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 
 export async function GET(req: NextRequest) {
 	try {
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..1d20dda99d974296cc03b6db2ac797c26d348c29
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -6,6 +6,10 @@
 	getAllToolsForApps,
 	getAnyConnectedApps,
 } from "@/lib/composio-config";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 export const dynamic = "force-dynamic";
 export const fetchCache = "force-no-store";
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..4cfcaa69e375d5798c11fe0289af31bac7b72408
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,17 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep: "Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}

file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..6bb2674751d2195f373518a5969658c52d0df005
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -28,6 +28,12 @@
 	getHighImpactToolNames,
 	getUserConfirmationDecision,
 } from "@/lib/high-impact-action-confirmation";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 export const dynamic = "force-dynamic";
 
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,23 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error(
+						"Authenticated session but no Convex token found"
+					),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +274,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +463,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +494,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +521,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +547,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +630,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
+				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
 			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
-				},
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6da2e22ee6673d76a2e2ee70785c5fef43..2d476efc5e1b9fe7c44e03119a247f22e49ed839
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -134,9 +145,20 @@
 				const redirectUrl = connection.redirectUrl;
 
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
 					);
 				}
@@ -162,12 +184,22 @@
 								createdBy: memberId as Id<"members">,
 							});
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -178,11 +210,22 @@
 					message: `Redirect user to ${toolkit} authorization`,
 				});
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
 				);
 			}
@@ -191,7 +234,12 @@
 		if (action === "complete") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -286,7 +334,13 @@
 							connectedBy: memberId as Id<"members">,
 						});
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -296,11 +350,22 @@
 					message: `${toolkit} connected successfully`,
 				});
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -308,9 +373,17 @@
 
 		return NextResponse.json({ error: "Invalid action" }, { status: 400 });
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -392,7 +465,13 @@
 					connectedAccounts,
 				});
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
 				return NextResponse.json({
 					success: true,
@@ -414,7 +493,13 @@
 					account: connectedAccount,
 				});
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
 					connected: false,
 					status: "NOT_FOUND",
@@ -428,7 +513,13 @@
 			// Validate userId format (should be member_{memberId})
 			const memberIdPattern = /^member_[A-Za-z0-9-_]+$/;
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
 					{
 						error: "Invalid userId format. Expected format: member_{memberId}",
@@ -452,11 +543,22 @@
 					entityId,
 				});
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -471,9 +573,17 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep: "Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -517,13 +627,11 @@
 			await apiClient.deleteConnection(composioAccountId);
 			composioDeleteSuccess = true;
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
 			// Continue to delete from database even if Composio delete fails
 		}
@@ -540,17 +648,19 @@
 					memberId: memberId as Id<"members">,
 				});
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
 				);
 			}
@@ -562,13 +672,17 @@
 			composioDeleted: composioDeleteSuccess,
 		});
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..81d280bef5a01d09f4005a43532ba3defdf054ea
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -7,6 +7,11 @@
 	getConnectedApps,
 	initiateAppConnection,
 } from "@/lib/composio-config";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 
 export async function GET(req: NextRequest) {
 	try {
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..1d20dda99d974296cc03b6db2ac797c26d348c29
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -6,6 +6,10 @@
 	getAllToolsForApps,
 	getAnyConnectedApps,
 } from "@/lib/composio-config";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 export const dynamic = "force-dynamic";
 export const fetchCache = "force-no-store";
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..4cfcaa69e375d5798c11fe0289af31bac7b72408
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,17 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep: "Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Checking remaining console errors**
exec
/bin/zsh -lc "rg \"console\\.(error|warn)\" src/app/api/assistant/chatbot/route.ts src/app/api/assistant/route.ts src/app/api/assistant/composio/route.ts src/app/api/assistant/composio/status/route.ts src/app/api/assistant/composio/tools/route.ts src/app/api/assistant/composio/agentauth/route.ts -n" in /Users/macbook/Documents/GitHub/platform exited 1 in 51ms:

file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..6bb2674751d2195f373518a5969658c52d0df005
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -28,6 +28,12 @@
 	getHighImpactToolNames,
 	getUserConfirmationDecision,
 } from "@/lib/high-impact-action-confirmation";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 export const dynamic = "force-dynamic";
 
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,23 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error(
+						"Authenticated session but no Convex token found"
+					),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +274,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +463,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +494,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +521,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +547,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +630,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
+				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
 			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
-				},
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6da2e22ee6673d76a2e2ee70785c5fef43..2d476efc5e1b9fe7c44e03119a247f22e49ed839
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -134,9 +145,20 @@
 				const redirectUrl = connection.redirectUrl;
 
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
 					);
 				}
@@ -162,12 +184,22 @@
 								createdBy: memberId as Id<"members">,
 							});
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -178,11 +210,22 @@
 					message: `Redirect user to ${toolkit} authorization`,
 				});
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
 				);
 			}
@@ -191,7 +234,12 @@
 		if (action === "complete") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -286,7 +334,13 @@
 							connectedBy: memberId as Id<"members">,
 						});
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -296,11 +350,22 @@
 					message: `${toolkit} connected successfully`,
 				});
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -308,9 +373,17 @@
 
 		return NextResponse.json({ error: "Invalid action" }, { status: 400 });
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -392,7 +465,13 @@
 					connectedAccounts,
 				});
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
 				return NextResponse.json({
 					success: true,
@@ -414,7 +493,13 @@
 					account: connectedAccount,
 				});
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
 					connected: false,
 					status: "NOT_FOUND",
@@ -428,7 +513,13 @@
 			// Validate userId format (should be member_{memberId})
 			const memberIdPattern = /^member_[A-Za-z0-9-_]+$/;
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
 					{
 						error: "Invalid userId format. Expected format: member_{memberId}",
@@ -452,11 +543,22 @@
 					entityId,
 				});
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -471,9 +573,17 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep: "Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -517,13 +627,11 @@
 			await apiClient.deleteConnection(composioAccountId);
 			composioDeleteSuccess = true;
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
 			// Continue to delete from database even if Composio delete fails
 		}
@@ -540,17 +648,19 @@
 					memberId: memberId as Id<"members">,
 				});
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
 				);
 			}
@@ -562,13 +672,17 @@
 			composioDeleted: composioDeleteSuccess,
 		});
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..81d280bef5a01d09f4005a43532ba3defdf054ea
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -7,6 +7,11 @@
 	getConnectedApps,
 	initiateAppConnection,
 } from "@/lib/composio-config";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 
 export async function GET(req: NextRequest) {
 	try {
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..1d20dda99d974296cc03b6db2ac797c26d348c29
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -6,6 +6,10 @@
 	getAllToolsForApps,
 	getAnyConnectedApps,
 } from "@/lib/composio-config";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 export const dynamic = "force-dynamic";
 export const fetchCache = "force-no-store";
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..4cfcaa69e375d5798c11fe0289af31bac7b72408
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,17 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep: "Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Preparing for formatting and linting**
exec
/bin/zsh -lc "printf '[%s] S4 major code changes: added shared sanitized error utility and updated assistant/composio routes for actionable errors and fallback behavior\\n' \""'$(date -u '"'+%Y-%m-%d %H:%M:%S UTC')\" >> .ralph/activity.log" in /Users/macbook/Documents/GitHub/platform succeeded in 52ms:

file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..6bb2674751d2195f373518a5969658c52d0df005
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -28,6 +28,12 @@
 	getHighImpactToolNames,
 	getUserConfirmationDecision,
 } from "@/lib/high-impact-action-confirmation";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 export const dynamic = "force-dynamic";
 
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,23 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error(
+						"Authenticated session but no Convex token found"
+					),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +274,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +463,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +494,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +521,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +547,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +630,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
+				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
 			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
-				},
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6da2e22ee6673d76a2e2ee70785c5fef43..2d476efc5e1b9fe7c44e03119a247f22e49ed839
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -134,9 +145,20 @@
 				const redirectUrl = connection.redirectUrl;
 
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
 					);
 				}
@@ -162,12 +184,22 @@
 								createdBy: memberId as Id<"members">,
 							});
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -178,11 +210,22 @@
 					message: `Redirect user to ${toolkit} authorization`,
 				});
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
 				);
 			}
@@ -191,7 +234,12 @@
 		if (action === "complete") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -286,7 +334,13 @@
 							connectedBy: memberId as Id<"members">,
 						});
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -296,11 +350,22 @@
 					message: `${toolkit} connected successfully`,
 				});
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -308,9 +373,17 @@
 
 		return NextResponse.json({ error: "Invalid action" }, { status: 400 });
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -392,7 +465,13 @@
 					connectedAccounts,
 				});
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
 				return NextResponse.json({
 					success: true,
@@ -414,7 +493,13 @@
 					account: connectedAccount,
 				});
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
 					connected: false,
 					status: "NOT_FOUND",
@@ -428,7 +513,13 @@
 			// Validate userId format (should be member_{memberId})
 			const memberIdPattern = /^member_[A-Za-z0-9-_]+$/;
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
 					{
 						error: "Invalid userId format. Expected format: member_{memberId}",
@@ -452,11 +543,22 @@
 					entityId,
 				});
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -471,9 +573,17 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep: "Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -517,13 +627,11 @@
 			await apiClient.deleteConnection(composioAccountId);
 			composioDeleteSuccess = true;
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
 			// Continue to delete from database even if Composio delete fails
 		}
@@ -540,17 +648,19 @@
 					memberId: memberId as Id<"members">,
 				});
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
 				);
 			}
@@ -562,13 +672,17 @@
 			composioDeleted: composioDeleteSuccess,
 		});
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..81d280bef5a01d09f4005a43532ba3defdf054ea
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -7,6 +7,11 @@
 	getConnectedApps,
 	initiateAppConnection,
 } from "@/lib/composio-config";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 
 export async function GET(req: NextRequest) {
 	try {
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..1d20dda99d974296cc03b6db2ac797c26d348c29
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -6,6 +6,10 @@
 	getAllToolsForApps,
 	getAnyConnectedApps,
 } from "@/lib/composio-config";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 export const dynamic = "force-dynamic";
 export const fetchCache = "force-no-store";
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..4cfcaa69e375d5798c11fe0289af31bac7b72408
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,17 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep: "Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Planning targeted build and type checks**
codex
Core edits are in place. I’m running the required verification gates now (`bun run type`, `bun run check`, and `bun run build`) to validate regressions and catch any typing/formatting issues introduced by S4.

thinking
**Deciding sequential execution**
exec
/bin/zsh -lc 'bun run type' in /Users/macbook/Documents/GitHub/platform succeeded in 11.96s:
$ tsc --noEmit
file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..6bb2674751d2195f373518a5969658c52d0df005
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -28,6 +28,12 @@
 	getHighImpactToolNames,
 	getUserConfirmationDecision,
 } from "@/lib/high-impact-action-confirmation";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 export const dynamic = "force-dynamic";
 
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,23 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error(
+						"Authenticated session but no Convex token found"
+					),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +274,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +463,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +494,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +521,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +547,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +630,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
+				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
 			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
-				},
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6da2e22ee6673d76a2e2ee70785c5fef43..2d476efc5e1b9fe7c44e03119a247f22e49ed839
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -134,9 +145,20 @@
 				const redirectUrl = connection.redirectUrl;
 
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
 					);
 				}
@@ -162,12 +184,22 @@
 								createdBy: memberId as Id<"members">,
 							});
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -178,11 +210,22 @@
 					message: `Redirect user to ${toolkit} authorization`,
 				});
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
 				);
 			}
@@ -191,7 +234,12 @@
 		if (action === "complete") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -286,7 +334,13 @@
 							connectedBy: memberId as Id<"members">,
 						});
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -296,11 +350,22 @@
 					message: `${toolkit} connected successfully`,
 				});
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -308,9 +373,17 @@
 
 		return NextResponse.json({ error: "Invalid action" }, { status: 400 });
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -392,7 +465,13 @@
 					connectedAccounts,
 				});
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
 				return NextResponse.json({
 					success: true,
@@ -414,7 +493,13 @@
 					account: connectedAccount,
 				});
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
 					connected: false,
 					status: "NOT_FOUND",
@@ -428,7 +513,13 @@
 			// Validate userId format (should be member_{memberId})
 			const memberIdPattern = /^member_[A-Za-z0-9-_]+$/;
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
 					{
 						error: "Invalid userId format. Expected format: member_{memberId}",
@@ -452,11 +543,22 @@
 					entityId,
 				});
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -471,9 +573,17 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep: "Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -517,13 +627,11 @@
 			await apiClient.deleteConnection(composioAccountId);
 			composioDeleteSuccess = true;
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
 			// Continue to delete from database even if Composio delete fails
 		}
@@ -540,17 +648,19 @@
 					memberId: memberId as Id<"members">,
 				});
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
 				);
 			}
@@ -562,13 +672,17 @@
 			composioDeleted: composioDeleteSuccess,
 		});
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..81d280bef5a01d09f4005a43532ba3defdf054ea
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -7,6 +7,11 @@
 	getConnectedApps,
 	initiateAppConnection,
 } from "@/lib/composio-config";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 
 export async function GET(req: NextRequest) {
 	try {
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..1d20dda99d974296cc03b6db2ac797c26d348c29
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -6,6 +6,10 @@
 	getAllToolsForApps,
 	getAnyConnectedApps,
 } from "@/lib/composio-config";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 export const dynamic = "force-dynamic";
 export const fetchCache = "force-no-store";
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..4cfcaa69e375d5798c11fe0289af31bac7b72408
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,17 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep: "Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}

exec
/bin/zsh -lc 'bun run check' in /Users/macbook/Documents/GitHub/platform exited 1 in 712ms:
convex/chatbotQueries.ts:253:57 lint/style/noNonNullAssertion ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  ! Forbidden non-null assertion.
  
    251 │ 		);
    252 │ 		const channelMap = new Map(
  > 253 │ 			channels.filter(Boolean).map((c) => [String(c?._id), c!])
        │ 			                                                     ^^
    254 │ 		);
    255 │ 
  

convex/integrations.ts:265:56 lint/style/noNonNullAssertion ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  ! Forbidden non-null assertion.
  
    263 │ 			const connectedAccounts = await ctx.db
    264 │ 				.query("connected_accounts")
  > 265 │ 				.withIndex("by_member_id", (q) => q.eq("memberId", args.memberId!))
        │ 				                                                   ^^^^^^^^^^^^^^
file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..48ca353e160c62c14a45f95afb0fc697ae71ee04
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -9,6 +9,12 @@
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
 import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	buildAssistantResponseMetadata,
 	buildAssistantSystemPrompt,
 	classifyAssistantQuery,
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,21 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error("Authenticated session but no Convex token found"),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +272,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +461,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +492,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +519,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +545,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +628,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
-			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
 				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
+			return NextResponse.json(
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6da2e22ee6673d76a2e2ee70785c5fef43..4bcfaacd6980f41c5e2ccd5c961eec749c201d00
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -134,9 +145,20 @@
 				const redirectUrl = connection.redirectUrl;
 
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
 					);
 				}
@@ -162,12 +184,22 @@
 								createdBy: memberId as Id<"members">,
 							});
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -178,11 +210,22 @@
 					message: `Redirect user to ${toolkit} authorization`,
 				});
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
 				);
 			}
@@ -191,7 +234,12 @@
 		if (action === "complete") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -286,7 +334,13 @@
 							connectedBy: memberId as Id<"members">,
 						});
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -296,11 +350,22 @@
 					message: `${toolkit} connected successfully`,
 				});
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -308,9 +373,17 @@
 
 		return NextResponse.json({ error: "Invalid action" }, { status: 400 });
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -392,7 +465,13 @@
 					connectedAccounts,
 				});
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
 				return NextResponse.json({
 					success: true,
@@ -414,7 +493,13 @@
 					account: connectedAccount,
 				});
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
 					connected: false,
 					status: "NOT_FOUND",
@@ -428,7 +513,13 @@
 			// Validate userId format (should be member_{memberId})
 			const memberIdPattern = /^member_[A-Za-z0-9-_]+$/;
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
 					{
 						error: "Invalid userId format. Expected format: member_{memberId}",
@@ -452,11 +543,22 @@
 					entityId,
 				});
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -471,9 +573,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep:
+					"Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -517,13 +628,11 @@
 			await apiClient.deleteConnection(composioAccountId);
 			composioDeleteSuccess = true;
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
 			// Continue to delete from database even if Composio delete fails
 		}
@@ -540,17 +649,19 @@
 					memberId: memberId as Id<"members">,
 				});
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
 				);
 			}
@@ -562,13 +673,17 @@
 			composioDeleted: composioDeleteSuccess,
 		});
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..51c2bb49285c3005c7c6e09d077bbae7c1c5faf1
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -1,5 +1,10 @@
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
+import {
 	APP_CONFIGS,
 	AVAILABLE_APPS,
 	type AvailableApp,
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..21a893b75b755bec31272ca42d4387897f003504
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -1,6 +1,10 @@
 import { unstable_noStore as noStore } from "next/cache";
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	type AvailableApp,
 	createComposioClient,
 	getAllToolsForApps,
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..15c87068f6c16c0db2cb55a2727e8495f9a30292
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,18 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep:
+					"Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Inspecting unexpected file modifications**
exec
/bin/zsh -lc 'git status --short' in /Users/macbook/Documents/GitHub/platform succeeded in 52ms:
 M .agents/tasks/prd-convex-composio-assistant.json
 M .ralph/activity.log
 M .ralph/errors.log
 M .ralph/runs/run-20260212-173602-17364-iter-2.log
 M src/app/api/assistant/chatbot/route.ts
 M src/app/api/assistant/composio/agentauth/route.ts
 M src/app/api/assistant/composio/route.ts
 M src/app/api/assistant/composio/status/route.ts
 M src/app/api/assistant/composio/tools/route.ts
 M src/app/api/assistant/route.ts
?? .ralph/.tmp/prompt-20260212-180835-23441-1.md
?? .ralph/.tmp/story-20260212-180835-23441-1.json
?? .ralph/.tmp/story-20260212-180835-23441-1.md
?? .ralph/runs/run-20260212-173602-17364-iter-2.md
?? .ralph/runs/run-20260212-180835-23441-iter-1.log
?? src/lib/assistant-error-utils.ts
file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..48ca353e160c62c14a45f95afb0fc697ae71ee04
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -9,6 +9,12 @@
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
 import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	buildAssistantResponseMetadata,
 	buildAssistantSystemPrompt,
 	classifyAssistantQuery,
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,21 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error("Authenticated session but no Convex token found"),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +272,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +461,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +492,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +519,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +545,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +628,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
-			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
 				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
+			return NextResponse.json(
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6da2e22ee6673d76a2e2ee70785c5fef43..4bcfaacd6980f41c5e2ccd5c961eec749c201d00
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -134,9 +145,20 @@
 				const redirectUrl = connection.redirectUrl;
 
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
 					);
 				}
@@ -162,12 +184,22 @@
 								createdBy: memberId as Id<"members">,
 							});
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -178,11 +210,22 @@
 					message: `Redirect user to ${toolkit} authorization`,
 				});
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
 				);
 			}
@@ -191,7 +234,12 @@
 		if (action === "complete") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -286,7 +334,13 @@
 							connectedBy: memberId as Id<"members">,
 						});
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -296,11 +350,22 @@
 					message: `${toolkit} connected successfully`,
 				});
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -308,9 +373,17 @@
 
 		return NextResponse.json({ error: "Invalid action" }, { status: 400 });
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -392,7 +465,13 @@
 					connectedAccounts,
 				});
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
 				return NextResponse.json({
 					success: true,
@@ -414,7 +493,13 @@
 					account: connectedAccount,
 				});
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
 					connected: false,
 					status: "NOT_FOUND",
@@ -428,7 +513,13 @@
 			// Validate userId format (should be member_{memberId})
 			const memberIdPattern = /^member_[A-Za-z0-9-_]+$/;
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
 					{
 						error: "Invalid userId format. Expected format: member_{memberId}",
@@ -452,11 +543,22 @@
 					entityId,
 				});
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -471,9 +573,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep:
+					"Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -517,13 +628,11 @@
 			await apiClient.deleteConnection(composioAccountId);
 			composioDeleteSuccess = true;
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
 			// Continue to delete from database even if Composio delete fails
 		}
@@ -540,17 +649,19 @@
 					memberId: memberId as Id<"members">,
 				});
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
 				);
 			}
@@ -562,13 +673,17 @@
 			composioDeleted: composioDeleteSuccess,
 		});
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..51c2bb49285c3005c7c6e09d077bbae7c1c5faf1
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -1,5 +1,10 @@
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
+import {
 	APP_CONFIGS,
 	AVAILABLE_APPS,
 	type AvailableApp,
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..21a893b75b755bec31272ca42d4387897f003504
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -1,6 +1,10 @@
 import { unstable_noStore as noStore } from "next/cache";
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	type AvailableApp,
 	createComposioClient,
 	getAllToolsForApps,
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..15c87068f6c16c0db2cb55a2727e8495f9a30292
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,18 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep:
+					"Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Confirming targeted file changes**
exec
/bin/zsh -lc 'bun run build' in /Users/macbook/Documents/GitHub/platformfile update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..48ca353e160c62c14a45f95afb0fc697ae71ee04
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -9,6 +9,12 @@
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
 import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	buildAssistantResponseMetadata,
 	buildAssistantSystemPrompt,
 	classifyAssistantQuery,
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,21 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error("Authenticated session but no Convex token found"),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +272,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +461,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +492,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +519,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +545,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +628,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
-			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
 				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
+			return NextResponse.json(
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6da2e22ee6673d76a2e2ee70785c5fef43..4bcfaacd6980f41c5e2ccd5c961eec749c201d00
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -134,9 +145,20 @@
 				const redirectUrl = connection.redirectUrl;
 
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
 					);
 				}
@@ -162,12 +184,22 @@
 								createdBy: memberId as Id<"members">,
 							});
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -178,11 +210,22 @@
 					message: `Redirect user to ${toolkit} authorization`,
 				});
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
 				);
 			}
@@ -191,7 +234,12 @@
 		if (action === "complete") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -286,7 +334,13 @@
 							connectedBy: memberId as Id<"members">,
 						});
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -296,11 +350,22 @@
 					message: `${toolkit} connected successfully`,
 				});
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -308,9 +373,17 @@
 
 		return NextResponse.json({ error: "Invalid action" }, { status: 400 });
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -392,7 +465,13 @@
 					connectedAccounts,
 				});
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
 				return NextResponse.json({
 					success: true,
@@ -414,7 +493,13 @@
 					account: connectedAccount,
 				});
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
 					connected: false,
 					status: "NOT_FOUND",
@@ -428,7 +513,13 @@
 			// Validate userId format (should be member_{memberId})
 			const memberIdPattern = /^member_[A-Za-z0-9-_]+$/;
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
 					{
 						error: "Invalid userId format. Expected format: member_{memberId}",
@@ -452,11 +543,22 @@
 					entityId,
 				});
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -471,9 +573,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep:
+					"Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -517,13 +628,11 @@
 			await apiClient.deleteConnection(composioAccountId);
 			composioDeleteSuccess = true;
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
 			// Continue to delete from database even if Composio delete fails
 		}
@@ -540,17 +649,19 @@
 					memberId: memberId as Id<"members">,
 				});
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
 				);
 			}
@@ -562,13 +673,17 @@
 			composioDeleted: composioDeleteSuccess,
 		});
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..51c2bb49285c3005c7c6e09d077bbae7c1c5faf1
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -1,5 +1,10 @@
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
+import {
 	APP_CONFIGS,
 	AVAILABLE_APPS,
 	type AvailableApp,
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..21a893b75b755bec31272ca42d4387897f003504
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -1,6 +1,10 @@
 import { unstable_noStore as noStore } from "next/cache";
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	type AvailableApp,
 	createComposioClient,
 	getAllToolsForApps,
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..15c87068f6c16c0db2cb55a2727e8495f9a30292
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,18 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep:
+					"Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Polling build status**
file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..48ca353e160c62c14a45f95afb0fc697ae71ee04
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -9,6 +9,12 @@
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
 import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	buildAssistantResponseMetadata,
 	buildAssistantSystemPrompt,
 	classifyAssistantQuery,
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,21 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error("Authenticated session but no Convex token found"),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +272,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +461,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +492,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +519,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +545,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +628,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
-			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
 				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
+			return NextResponse.json(
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6da2e22ee6673d76a2e2ee70785c5fef43..4bcfaacd6980f41c5e2ccd5c961eec749c201d00
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -134,9 +145,20 @@
 				const redirectUrl = connection.redirectUrl;
 
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
 					);
 				}
@@ -162,12 +184,22 @@
 								createdBy: memberId as Id<"members">,
 							});
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -178,11 +210,22 @@
 					message: `Redirect user to ${toolkit} authorization`,
 				});
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
 				);
 			}
@@ -191,7 +234,12 @@
 		if (action === "complete") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -286,7 +334,13 @@
 							connectedBy: memberId as Id<"members">,
 						});
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -296,11 +350,22 @@
 					message: `${toolkit} connected successfully`,
 				});
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -308,9 +373,17 @@
 
 		return NextResponse.json({ error: "Invalid action" }, { status: 400 });
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -392,7 +465,13 @@
 					connectedAccounts,
 				});
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
 				return NextResponse.json({
 					success: true,
@@ -414,7 +493,13 @@
 					account: connectedAccount,
 				});
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
 					connected: false,
 					status: "NOT_FOUND",
@@ -428,7 +513,13 @@
 			// Validate userId format (should be member_{memberId})
 			const memberIdPattern = /^member_[A-Za-z0-9-_]+$/;
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
 					{
 						error: "Invalid userId format. Expected format: member_{memberId}",
@@ -452,11 +543,22 @@
 					entityId,
 				});
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -471,9 +573,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep:
+					"Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -517,13 +628,11 @@
 			await apiClient.deleteConnection(composioAccountId);
 			composioDeleteSuccess = true;
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
 			// Continue to delete from database even if Composio delete fails
 		}
@@ -540,17 +649,19 @@
 					memberId: memberId as Id<"members">,
 				});
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
 				);
 			}
@@ -562,13 +673,17 @@
 			composioDeleted: composioDeleteSuccess,
 		});
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..51c2bb49285c3005c7c6e09d077bbae7c1c5faf1
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -1,5 +1,10 @@
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
+import {
 	APP_CONFIGS,
 	AVAILABLE_APPS,
 	type AvailableApp,
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..21a893b75b755bec31272ca42d4387897f003504
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -1,6 +1,10 @@
 import { unstable_noStore as noStore } from "next/cache";
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	type AvailableApp,
 	createComposioClient,
 	getAllToolsForApps,
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..15c87068f6c16c0db2cb55a2727e8495f9a30292
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,18 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep:
+					"Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}

 succeeded in 1m 16s:
  ▲ Next.js 14.2.35
  - Environments: .env.local

   Creating an optimized production build ...
> [PWA] Compile server
> [PWA] Compile server
> [PWA] Compile client (static)
> [PWA] Custom worker found: /Users/macbook/Documents/GitHub/platform/worker/index.js
> [PWA] Build custom worker: /Users/macbook/Documents/GitHub/platform/public/worker-FD2ISO-hlyd-ZAubvxSDC.js
> [PWA] Auto register service worker with: /Users/macbook/Documents/GitHub/platform/node_modules/next-pwa/register.js
> [PWA] Service worker: /Users/macbook/Documents/GitHub/platform/public/sw.js
> [PWA]   url: /sw.js
> [PWA]   scope: /
 ✓ Compiled successfully
   Skipping linting
   Checking validity of types ...
   Collecting page data ...
   Generating static pages (0/48) ...
   Generating static pages (12/48) 
   Generating static pages (24/48) 
file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..48ca353e160c62c14a45f95afb0fc697ae71ee04
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -9,6 +9,12 @@
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
 import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	buildAssistantResponseMetadata,
 	buildAssistantSystemPrompt,
 	classifyAssistantQuery,
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,21 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error("Authenticated session but no Convex token found"),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +272,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +461,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +492,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +519,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +545,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +628,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
-			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
 				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
+			return NextResponse.json(
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6da2e22ee6673d76a2e2ee70785c5fef43..4bcfaacd6980f41c5e2ccd5c961eec749c201d00
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -134,9 +145,20 @@
 				const redirectUrl = connection.redirectUrl;
 
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
 					);
 				}
@@ -162,12 +184,22 @@
 								createdBy: memberId as Id<"members">,
 							});
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -178,11 +210,22 @@
 					message: `Redirect user to ${toolkit} authorization`,
 				});
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
 				);
 			}
@@ -191,7 +234,12 @@
 		if (action === "complete") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -286,7 +334,13 @@
 							connectedBy: memberId as Id<"members">,
 						});
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -296,11 +350,22 @@
 					message: `${toolkit} connected successfully`,
 				});
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -308,9 +373,17 @@
 
 		return NextResponse.json({ error: "Invalid action" }, { status: 400 });
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -392,7 +465,13 @@
 					connectedAccounts,
 				});
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
 				return NextResponse.json({
 					success: true,
@@ -414,7 +493,13 @@
 					account: connectedAccount,
 				});
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
 					connected: false,
 					status: "NOT_FOUND",
@@ -428,7 +513,13 @@
 			// Validate userId format (should be member_{memberId})
 			const memberIdPattern = /^member_[A-Za-z0-9-_]+$/;
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
 					{
 						error: "Invalid userId format. Expected format: member_{memberId}",
@@ -452,11 +543,22 @@
 					entityId,
 				});
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -471,9 +573,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep:
+					"Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -517,13 +628,11 @@
 			await apiClient.deleteConnection(composioAccountId);
 			composioDeleteSuccess = true;
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
 			// Continue to delete from database even if Composio delete fails
 		}
@@ -540,17 +649,19 @@
 					memberId: memberId as Id<"members">,
 				});
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
 				);
 			}
@@ -562,13 +673,17 @@
 			composioDeleted: composioDeleteSuccess,
 		});
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..51c2bb49285c3005c7c6e09d077bbae7c1c5faf1
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -1,5 +1,10 @@
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
+import {
 	APP_CONFIGS,
 	AVAILABLE_APPS,
 	type AvailableApp,
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..21a893b75b755bec31272ca42d4387897f003504
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -1,6 +1,10 @@
 import { unstable_noStore as noStore } from "next/cache";
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	type AvailableApp,
 	createComposioClient,
 	getAllToolsForApps,
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..15c87068f6c16c0db2cb55a2727e8495f9a30292
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,18 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep:
+					"Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Planning final verifications**
exec
/bin/zsh -lc "printf '[%s] S4 verification run: bun run type PASS; bun run check FAIL (pre-existing repo diagnostics); bun run build PASS\\n' \""'$(date -u '"'+%Y-%m-%d %H:%M:%S UTC')\" >> .ralph/activity.log" in /Users/macbook/Documents/GitHub/platform succeeded in 52ms:

file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..48ca353e160c62c14a45f95afb0fc697ae71ee04
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -9,6 +9,12 @@
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
 import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	buildAssistantResponseMetadata,
 	buildAssistantSystemPrompt,
 	classifyAssistantQuery,
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,21 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error("Authenticated session but no Convex token found"),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +272,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +461,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +492,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +519,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +545,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +628,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
-			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
 				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
+			return NextResponse.json(
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6da2e22ee6673d76a2e2ee70785c5fef43..4bcfaacd6980f41c5e2ccd5c961eec749c201d00
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -134,9 +145,20 @@
 				const redirectUrl = connection.redirectUrl;
 
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
 					);
 				}
@@ -162,12 +184,22 @@
 								createdBy: memberId as Id<"members">,
 							});
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -178,11 +210,22 @@
 					message: `Redirect user to ${toolkit} authorization`,
 				});
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
 				);
 			}
@@ -191,7 +234,12 @@
 		if (action === "complete") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -286,7 +334,13 @@
 							connectedBy: memberId as Id<"members">,
 						});
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -296,11 +350,22 @@
 					message: `${toolkit} connected successfully`,
 				});
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -308,9 +373,17 @@
 
 		return NextResponse.json({ error: "Invalid action" }, { status: 400 });
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -392,7 +465,13 @@
 					connectedAccounts,
 				});
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
 				return NextResponse.json({
 					success: true,
@@ -414,7 +493,13 @@
 					account: connectedAccount,
 				});
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
 					connected: false,
 					status: "NOT_FOUND",
@@ -428,7 +513,13 @@
 			// Validate userId format (should be member_{memberId})
 			const memberIdPattern = /^member_[A-Za-z0-9-_]+$/;
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
 					{
 						error: "Invalid userId format. Expected format: member_{memberId}",
@@ -452,11 +543,22 @@
 					entityId,
 				});
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -471,9 +573,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep:
+					"Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -517,13 +628,11 @@
 			await apiClient.deleteConnection(composioAccountId);
 			composioDeleteSuccess = true;
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
 			// Continue to delete from database even if Composio delete fails
 		}
@@ -540,17 +649,19 @@
 					memberId: memberId as Id<"members">,
 				});
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
 				);
 			}
@@ -562,13 +673,17 @@
 			composioDeleted: composioDeleteSuccess,
 		});
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..51c2bb49285c3005c7c6e09d077bbae7c1c5faf1
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -1,5 +1,10 @@
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
+import {
 	APP_CONFIGS,
 	AVAILABLE_APPS,
 	type AvailableApp,
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..21a893b75b755bec31272ca42d4387897f003504
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -1,6 +1,10 @@
 import { unstable_noStore as noStore } from "next/cache";
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	type AvailableApp,
 	createComposioClient,
 	getAllToolsForApps,
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..15c87068f6c16c0db2cb55a2727e8495f9a30292
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,18 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep:
+					"Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Planning diff inspection**
codex
I’ve completed verification: typecheck and production build pass, while `bun run check` fails due existing repo-wide lint issues unrelated to S4. Next I’m doing a focused security/performance/regression pass on just the changed routes before committing.
exec
/bin/zsh -lc 'git diff -- src/lib/assistant-error-utils.ts' in /Users/macbook/Documents/GitHub/platformexec
/bin/zsh -lc 'git diff -- src/app/api/assistant/chatbot/route.ts' in /Users/macbook/Documents/GitHub/platformexec
/bin/zsh -lc 'git diff -- src/app/api/assistant/composio/agentauth/route.ts' in /Users/macbook/Documents/GitHub/platformexec
/bin/zsh -lc 'git diff -- src/app/api/assistant/composio/tools/route.ts src/app/api/assistant/composio/route.ts src/app/api/assistant/composio/status/route.ts src/app/api/assistant/route.ts' in /Users/macbook/Documents/GitHub/platform succeeded in 51ms:

 succeeded in 51ms:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7..48ca353 100644
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -8,6 +8,12 @@ import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 import {
 	buildAssistantResponseMetadata,
 	buildAssistantSystemPrompt,
@@ -89,10 +95,12 @@ async function logExternalToolAuditEvent(params: {
 			}
 		);
 succeeded in 51ms:
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6..4bcfaac 100644
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@ import { ConvexHttpClient } from "convex/browser";
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@ export async function POST(req: NextRequest) {
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 succeeded in 51ms:
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a08..51c2bb4 100644
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -1,4 +1,9 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import {
 	APP_CONFIGS,
 	AVAILABLE_APPS,
@@ -41,12 +46,18 @@ export async function GET(req: NextRequest) {
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..48ca353e160c62c14a45f95afb0fc697ae71ee04
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -9,6 +9,12 @@
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
 import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	buildAssistantResponseMetadata,
 	buildAssistantSystemPrompt,
 	classifyAssistantQuery,
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,21 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error("Authenticated session but no Convex token found"),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +272,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +461,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +492,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +519,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +545,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +628,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
-			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
 				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
+			return NextResponse.json(
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6da2e22ee6673d76a2e2ee70785c5fef43..4bcfaacd6980f41c5e2ccd5c961eec749c201d00
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -134,9 +145,20 @@
 				const redirectUrl = connection.redirectUrl;
 
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
 					);
 				}
@@ -162,12 +184,22 @@
 								createdBy: memberId as Id<"members">,
 							});
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -178,11 +210,22 @@
 					message: `Redirect user to ${toolkit} authorization`,
 				});
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
 				);
 			}
@@ -191,7 +234,12 @@
 		if (action === "complete") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -286,7 +334,13 @@
 							connectedBy: memberId as Id<"members">,
 						});
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -296,11 +350,22 @@
 					message: `${toolkit} connected successfully`,
 				});
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -308,9 +373,17 @@
 
 		return NextResponse.json({ error: "Invalid action" }, { status: 400 });
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -392,7 +465,13 @@
 					connectedAccounts,
 				});
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
 				return NextResponse.json({
 					success: true,
@@ -414,7 +493,13 @@
 					account: connectedAccount,
 				});
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
 					connected: false,
 					status: "NOT_FOUND",
@@ -428,7 +513,13 @@
 			// Validate userId format (should be member_{memberId})
 			const memberIdPattern = /^member_[A-Za-z0-9-_]+$/;
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
 					{
 						error: "Invalid userId format. Expected format: member_{memberId}",
@@ -452,11 +543,22 @@
 					entityId,
 				});
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -471,9 +573,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep:
+					"Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -517,13 +628,11 @@
 			await apiClient.deleteConnection(composioAccountId);
 			composioDeleteSuccess = true;
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
 			// Continue to delete from database even if Composio delete fails
 		}
@@ -540,17 +649,19 @@
 					memberId: memberId as Id<"members">,
 				});
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
 				);
 			}
@@ -562,13 +673,17 @@
 			composioDeleted: composioDeleteSuccess,
 		});
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..51c2bb49285c3005c7c6e09d077bbae7c1c5faf1
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -1,5 +1,10 @@
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
+import {
 	APP_CONFIGS,
 	AVAILABLE_APPS,
 	type AvailableApp,
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..21a893b75b755bec31272ca42d4387897f003504
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -1,6 +1,10 @@
 import { unstable_noStore as noStore } from "next/cache";
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	type AvailableApp,
 	createComposioClient,
 	getAllToolsForApps,
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..15c87068f6c16c0db2cb55a2727e8495f9a30292
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,18 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep:
+					"Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Reviewing new file content**
exec
/bin/zsh -lc "sed -n '1,260p' src/lib/assistant-error-utils.ts" in /Users/macbook/Documents/GitHub/platform succeeded in 51ms:
import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";

const REDACTED = "[REDACTED]";
const MAX_ERROR_MESSAGE_LENGTH = 280;
const SENSITIVE_VALUE_PATTERN =
	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;

type ErrorLike = {
	name?: string;
	message?: string;
	stack?: string;
	code?: string;
	status?: number;
};

export function sanitizeErrorMessage(input: string): string {
	return input
		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
			if (args[1]) {
				return `${args[1]}${REDACTED}`;
file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..48ca353e160c62c14a45f95afb0fc697ae71ee04
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -9,6 +9,12 @@
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
 import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	buildAssistantResponseMetadata,
 	buildAssistantSystemPrompt,
 	classifyAssistantQuery,
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,21 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error("Authenticated session but no Convex token found"),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +272,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +461,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +492,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +519,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +545,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +628,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
-			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
 				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
+			return NextResponse.json(
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6da2e22ee6673d76a2e2ee70785c5fef43..4bcfaacd6980f41c5e2ccd5c961eec749c201d00
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -134,9 +145,20 @@
 				const redirectUrl = connection.redirectUrl;
 
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
 					);
 				}
@@ -162,12 +184,22 @@
 								createdBy: memberId as Id<"members">,
 							});
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -178,11 +210,22 @@
 					message: `Redirect user to ${toolkit} authorization`,
 				});
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
 				);
 			}
@@ -191,7 +234,12 @@
 		if (action === "complete") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -286,7 +334,13 @@
 							connectedBy: memberId as Id<"members">,
 						});
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -296,11 +350,22 @@
 					message: `${toolkit} connected successfully`,
 				});
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -308,9 +373,17 @@
 
 		return NextResponse.json({ error: "Invalid action" }, { status: 400 });
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -392,7 +465,13 @@
 					connectedAccounts,
 				});
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
 				return NextResponse.json({
 					success: true,
@@ -414,7 +493,13 @@
 					account: connectedAccount,
 				});
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
 					connected: false,
 					status: "NOT_FOUND",
@@ -428,7 +513,13 @@
 			// Validate userId format (should be member_{memberId})
 			const memberIdPattern = /^member_[A-Za-z0-9-_]+$/;
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
 					{
 						error: "Invalid userId format. Expected format: member_{memberId}",
@@ -452,11 +543,22 @@
 					entityId,
 				});
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -471,9 +573,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep:
+					"Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -517,13 +628,11 @@
 			await apiClient.deleteConnection(composioAccountId);
 			composioDeleteSuccess = true;
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
 			// Continue to delete from database even if Composio delete fails
 		}
@@ -540,17 +649,19 @@
 					memberId: memberId as Id<"members">,
 				});
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
 				);
 			}
@@ -562,13 +673,17 @@
 			composioDeleted: composioDeleteSuccess,
 		});
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..51c2bb49285c3005c7c6e09d077bbae7c1c5faf1
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -1,5 +1,10 @@
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
+import {
 	APP_CONFIGS,
 	AVAILABLE_APPS,
 	type AvailableApp,
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..21a893b75b755bec31272ca42d4387897f003504
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -1,6 +1,10 @@
 import { unstable_noStore as noStore } from "next/cache";
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	type AvailableApp,
 	createComposioClient,
 	getAllToolsForApps,
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..15c87068f6c16c0db2cb55a2727e8495f9a30292
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,18 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep:
+					"Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Reviewing error handling and logging improvements**
exec
/bin/zsh -lc "rg \"details:|error instanceof Error \\? error.message|console\\.(error|warn)\" src/app/api/assistant src/lib/assistant-error-utils.ts -n" in /Users/macbook/Documents/GitHub/platform succeeded in 51ms:
src/lib/assistant-error-utils.ts:65:		console.warn(`[${params.route}] ${params.stage}`, payload);
src/lib/assistant-error-utils.ts:68:	console.error(`[${params.route}] ${params.stage}`, payload);
src/app/api/assistant/composio/tools/route.ts:129:								error instanceof Error ? error.message : "Unknown error"
src/app/api/assistant/composio/agentauth/route.ts:226:							error instanceof Error ? error.message : "Unknown error"
src/app/api/assistant/composio/agentauth/route.ts:366:							error instanceof Error ? error.message : "Unknown error"
src/app/api/assistant/composio/agentauth/route.ts:559:							error instanceof Error ? error.message : "Unknown error"
file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..48ca353e160c62c14a45f95afb0fc697ae71ee04
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -9,6 +9,12 @@
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
 import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	buildAssistantResponseMetadata,
 	buildAssistantSystemPrompt,
 	classifyAssistantQuery,
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,21 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error("Authenticated session but no Convex token found"),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +272,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +461,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +492,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +519,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +545,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +628,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
-			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
 				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
+			return NextResponse.json(
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6da2e22ee6673d76a2e2ee70785c5fef43..4bcfaacd6980f41c5e2ccd5c961eec749c201d00
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -134,9 +145,20 @@
 				const redirectUrl = connection.redirectUrl;
 
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
 					);
 				}
@@ -162,12 +184,22 @@
 								createdBy: memberId as Id<"members">,
 							});
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -178,11 +210,22 @@
 					message: `Redirect user to ${toolkit} authorization`,
 				});
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
 				);
 			}
@@ -191,7 +234,12 @@
 		if (action === "complete") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -286,7 +334,13 @@
 							connectedBy: memberId as Id<"members">,
 						});
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -296,11 +350,22 @@
 					message: `${toolkit} connected successfully`,
 				});
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -308,9 +373,17 @@
 
 		return NextResponse.json({ error: "Invalid action" }, { status: 400 });
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -392,7 +465,13 @@
 					connectedAccounts,
 				});
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
 				return NextResponse.json({
 					success: true,
@@ -414,7 +493,13 @@
 					account: connectedAccount,
 				});
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
 					connected: false,
 					status: "NOT_FOUND",
@@ -428,7 +513,13 @@
 			// Validate userId format (should be member_{memberId})
 			const memberIdPattern = /^member_[A-Za-z0-9-_]+$/;
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
 					{
 						error: "Invalid userId format. Expected format: member_{memberId}",
@@ -452,11 +543,22 @@
 					entityId,
 				});
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -471,9 +573,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep:
+					"Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -517,13 +628,11 @@
 			await apiClient.deleteConnection(composioAccountId);
 			composioDeleteSuccess = true;
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
 			// Continue to delete from database even if Composio delete fails
 		}
@@ -540,17 +649,19 @@
 					memberId: memberId as Id<"members">,
 				});
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
 				);
 			}
@@ -562,13 +673,17 @@
 			composioDeleted: composioDeleteSuccess,
 		});
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..51c2bb49285c3005c7c6e09d077bbae7c1c5faf1
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -1,5 +1,10 @@
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
+import {
 	APP_CONFIGS,
 	AVAILABLE_APPS,
 	type AvailableApp,
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..21a893b75b755bec31272ca42d4387897f003504
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -1,6 +1,10 @@
 import { unstable_noStore as noStore } from "next/cache";
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	type AvailableApp,
 	createComposioClient,
 	getAllToolsForApps,
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..15c87068f6c16c0db2cb55a2727e8495f9a30292
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,18 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep:
+					"Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Verifying type check stability**
exec
/bin/zsh -lc 'bun run type' in /Users/macbook/Documents/GitHub/platform succeeded in 12.63s:
$ tsc --noEmit
file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..48ca353e160c62c14a45f95afb0fc697ae71ee04
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -9,6 +9,12 @@
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
 import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	buildAssistantResponseMetadata,
 	buildAssistantSystemPrompt,
 	classifyAssistantQuery,
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,21 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error("Authenticated session but no Convex token found"),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +272,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +461,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +492,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +519,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +545,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +628,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
-			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
 				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
+			return NextResponse.json(
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6da2e22ee6673d76a2e2ee70785c5fef43..4bcfaacd6980f41c5e2ccd5c961eec749c201d00
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -134,9 +145,20 @@
 				const redirectUrl = connection.redirectUrl;
 
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
 					);
 				}
@@ -162,12 +184,22 @@
 								createdBy: memberId as Id<"members">,
 							});
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -178,11 +210,22 @@
 					message: `Redirect user to ${toolkit} authorization`,
 				});
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
 				);
 			}
@@ -191,7 +234,12 @@
 		if (action === "complete") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -286,7 +334,13 @@
 							connectedBy: memberId as Id<"members">,
 						});
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -296,11 +350,22 @@
 					message: `${toolkit} connected successfully`,
 				});
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -308,9 +373,17 @@
 
 		return NextResponse.json({ error: "Invalid action" }, { status: 400 });
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -392,7 +465,13 @@
 					connectedAccounts,
 				});
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
 				return NextResponse.json({
 					success: true,
@@ -414,7 +493,13 @@
 					account: connectedAccount,
 				});
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
 					connected: false,
 					status: "NOT_FOUND",
@@ -428,7 +513,13 @@
 			// Validate userId format (should be member_{memberId})
 			const memberIdPattern = /^member_[A-Za-z0-9-_]+$/;
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
 					{
 						error: "Invalid userId format. Expected format: member_{memberId}",
@@ -452,11 +543,22 @@
 					entityId,
 				});
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -471,9 +573,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep:
+					"Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -517,13 +628,11 @@
 			await apiClient.deleteConnection(composioAccountId);
 			composioDeleteSuccess = true;
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
 			// Continue to delete from database even if Composio delete fails
 		}
@@ -540,17 +649,19 @@
 					memberId: memberId as Id<"members">,
 				});
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
 				);
 			}
@@ -562,13 +673,17 @@
 			composioDeleted: composioDeleteSuccess,
 		});
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..51c2bb49285c3005c7c6e09d077bbae7c1c5faf1
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -1,5 +1,10 @@
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
+import {
 	APP_CONFIGS,
 	AVAILABLE_APPS,
 	type AvailableApp,
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..21a893b75b755bec31272ca42d4387897f003504
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -1,6 +1,10 @@
 import { unstable_noStore as noStore } from "next/cache";
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	type AvailableApp,
 	createComposioClient,
 	getAllToolsForApps,
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..15c87068f6c16c0db2cb55a2727e8495f9a30292
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,18 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep:
+					"Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Planning two-step commit sequence**
codex
I’m at the finalization stage: I’ll append the required progress entry, then use the `commit` skill workflow to stage and commit all run changes, verify clean status, and capture the final commit metadata.

thinking
**Planning staged dual commits**
exec
/bin/zsh -lc 'tail -n 80 .ralph/progress.md' in /Users/macbook/Documents/GitHub/platform succeeded in 51ms:
  - Useful context
  - This iteration did not require additional source-code changes beyond run artifacts and verification records.
---
## [2026-02-12 17:43:21 IST] - S2: Add high-impact action confirmation
Thread: 
Run: 20260212-173602-17364 (iteration 1)
Run log: /Users/macbook/Documents/GitHub/platform/.ralph/runs/run-20260212-173602-17364-iter-1.log
Run summary: /Users/macbook/Documents/GitHub/platform/.ralph/runs/run-20260212-173602-17364-iter-1.md
- Guardrails reviewed: yes
- No-commit run: false
- Commit: d10e5d4 feat(assistant): require confirmation for risky tools
- Post-commit status: `.ralph/runs/run-20260212-173602-17364-iter-1.log`
- Verification:
  - Command: `bun run type` -> PASS
  - Command: `bun run check` -> FAIL (pre-existing repository lint violations)
  - Command: `bun run build` -> PASS
- Files changed:
  - src/lib/high-impact-action-confirmation.ts
  - src/app/api/assistant/chatbot/route.ts
  - convex/assistantComposioTools.ts
file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..48ca353e160c62c14a45f95afb0fc697ae71ee04
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -9,6 +9,12 @@
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
 import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	buildAssistantResponseMetadata,
 	buildAssistantSystemPrompt,
 	classifyAssistantQuery,
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,21 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error("Authenticated session but no Convex token found"),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +272,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +461,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +492,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +519,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +545,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +628,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
-			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
 				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
+			return NextResponse.json(
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6da2e22ee6673d76a2e2ee70785c5fef43..4bcfaacd6980f41c5e2ccd5c961eec749c201d00
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -134,9 +145,20 @@
 				const redirectUrl = connection.redirectUrl;
 
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
 					);
 				}
@@ -162,12 +184,22 @@
 								createdBy: memberId as Id<"members">,
 							});
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -178,11 +210,22 @@
 					message: `Redirect user to ${toolkit} authorization`,
 				});
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
 				);
 			}
@@ -191,7 +234,12 @@
 		if (action === "complete") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -286,7 +334,13 @@
 							connectedBy: memberId as Id<"members">,
 						});
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -296,11 +350,22 @@
 					message: `${toolkit} connected successfully`,
 				});
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -308,9 +373,17 @@
 
 		return NextResponse.json({ error: "Invalid action" }, { status: 400 });
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -392,7 +465,13 @@
 					connectedAccounts,
 				});
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
 				return NextResponse.json({
 					success: true,
@@ -414,7 +493,13 @@
 					account: connectedAccount,
 				});
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
 					connected: false,
 					status: "NOT_FOUND",
@@ -428,7 +513,13 @@
 			// Validate userId format (should be member_{memberId})
 			const memberIdPattern = /^member_[A-Za-z0-9-_]+$/;
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
 					{
 						error: "Invalid userId format. Expected format: member_{memberId}",
@@ -452,11 +543,22 @@
 					entityId,
 				});
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -471,9 +573,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep:
+					"Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -517,13 +628,11 @@
 			await apiClient.deleteConnection(composioAccountId);
 			composioDeleteSuccess = true;
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
 			// Continue to delete from database even if Composio delete fails
 		}
@@ -540,17 +649,19 @@
 					memberId: memberId as Id<"members">,
 				});
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
 				);
 			}
@@ -562,13 +673,17 @@
 			composioDeleted: composioDeleteSuccess,
 		});
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..51c2bb49285c3005c7c6e09d077bbae7c1c5faf1
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -1,5 +1,10 @@
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
+import {
 	APP_CONFIGS,
 	AVAILABLE_APPS,
 	type AvailableApp,
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..21a893b75b755bec31272ca42d4387897f003504
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -1,6 +1,10 @@
 import { unstable_noStore as noStore } from "next/cache";
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	type AvailableApp,
 	createComposioClient,
 	getAllToolsForApps,
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..15c87068f6c16c0db2cb55a2727e8495f9a30292
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,18 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep:
+					"Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Staging and committing changes**
exec
/bin/zsh -lc 'git add -A && git commit -m "fix(assistant): harden composio error fallback"' in /Users/macbook/Documents/GitHub/platform succeeded in 125ms:
[main 965c586] fix(assistant): harden composio error fallback
 16 files changed, 24863 insertions(+), 130 deletions(-)
 create mode 100644 .ralph/.tmp/prompt-20260212-180835-23441-1.md
 create mode 100644 .ralph/.tmp/story-20260212-180835-23441-1.json
 create mode 100644 .ralph/.tmp/story-20260212-180835-23441-1.md
 create mode 100644 .ralph/runs/run-20260212-173602-17364-iter-2.md
 create mode 100644 .ralph/runs/run-20260212-180835-23441-iter-1.log
 create mode 100644 src/lib/assistant-error-utils.ts
file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..48ca353e160c62c14a45f95afb0fc697ae71ee04
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -9,6 +9,12 @@
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
 import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	buildAssistantResponseMetadata,
 	buildAssistantSystemPrompt,
 	classifyAssistantQuery,
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,21 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error("Authenticated session but no Convex token found"),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +272,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +461,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +492,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +519,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +545,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +628,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
-			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
 				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
+			return NextResponse.json(
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6da2e22ee6673d76a2e2ee70785c5fef43..4bcfaacd6980f41c5e2ccd5c961eec749c201d00
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -134,9 +145,20 @@
 				const redirectUrl = connection.redirectUrl;
 
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
 					);
 				}
@@ -162,12 +184,22 @@
 								createdBy: memberId as Id<"members">,
 							});
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -178,11 +210,22 @@
 					message: `Redirect user to ${toolkit} authorization`,
 				});
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
 				);
 			}
@@ -191,7 +234,12 @@
 		if (action === "complete") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -286,7 +334,13 @@
 							connectedBy: memberId as Id<"members">,
 						});
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -296,11 +350,22 @@
 					message: `${toolkit} connected successfully`,
 				});
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -308,9 +373,17 @@
 
 		return NextResponse.json({ error: "Invalid action" }, { status: 400 });
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -392,7 +465,13 @@
 					connectedAccounts,
 				});
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
 				return NextResponse.json({
 					success: true,
@@ -414,7 +493,13 @@
 					account: connectedAccount,
 				});
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
 					connected: false,
 					status: "NOT_FOUND",
@@ -428,7 +513,13 @@
 			// Validate userId format (should be member_{memberId})
 			const memberIdPattern = /^member_[A-Za-z0-9-_]+$/;
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
 					{
 						error: "Invalid userId format. Expected format: member_{memberId}",
@@ -452,11 +543,22 @@
 					entityId,
 				});
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -471,9 +573,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep:
+					"Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -517,13 +628,11 @@
 			await apiClient.deleteConnection(composioAccountId);
 			composioDeleteSuccess = true;
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
 			// Continue to delete from database even if Composio delete fails
 		}
@@ -540,17 +649,19 @@
 					memberId: memberId as Id<"members">,
 				});
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
 				);
 			}
@@ -562,13 +673,17 @@
 			composioDeleted: composioDeleteSuccess,
 		});
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..51c2bb49285c3005c7c6e09d077bbae7c1c5faf1
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -1,5 +1,10 @@
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
+import {
 	APP_CONFIGS,
 	AVAILABLE_APPS,
 	type AvailableApp,
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..21a893b75b755bec31272ca42d4387897f003504
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -1,6 +1,10 @@
 import { unstable_noStore as noStore } from "next/cache";
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	type AvailableApp,
 	createComposioClient,
 	getAllToolsForApps,
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..15c87068f6c16c0db2cb55a2727e8495f9a30292
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,18 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep:
+					"Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Confirming clean tree post-commit**
exec
/bin/zsh -lc 'git status --porcelain' in /Users/macbook/Documents/GitHub/platform succeeded in 51ms:
 M .ralph/runs/run-20260212-180835-23441-iter-1.log
file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..48ca353e160c62c14a45f95afb0fc697ae71ee04
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -9,6 +9,12 @@
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
 import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	buildAssistantResponseMetadata,
 	buildAssistantSystemPrompt,
 	classifyAssistantQuery,
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,21 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error("Authenticated session but no Convex token found"),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +272,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +461,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +492,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +519,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +545,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +628,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
-			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
 				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
+			return NextResponse.json(
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6da2e22ee6673d76a2e2ee70785c5fef43..4bcfaacd6980f41c5e2ccd5c961eec749c201d00
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -134,9 +145,20 @@
 				const redirectUrl = connection.redirectUrl;
 
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
 					);
 				}
@@ -162,12 +184,22 @@
 								createdBy: memberId as Id<"members">,
 							});
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -178,11 +210,22 @@
 					message: `Redirect user to ${toolkit} authorization`,
 				});
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
 				);
 			}
@@ -191,7 +234,12 @@
 		if (action === "complete") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -286,7 +334,13 @@
 							connectedBy: memberId as Id<"members">,
 						});
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -296,11 +350,22 @@
 					message: `${toolkit} connected successfully`,
 				});
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -308,9 +373,17 @@
 
 		return NextResponse.json({ error: "Invalid action" }, { status: 400 });
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -392,7 +465,13 @@
 					connectedAccounts,
 				});
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
 				return NextResponse.json({
 					success: true,
@@ -414,7 +493,13 @@
 					account: connectedAccount,
 				});
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
 					connected: false,
 					status: "NOT_FOUND",
@@ -428,7 +513,13 @@
 			// Validate userId format (should be member_{memberId})
 			const memberIdPattern = /^member_[A-Za-z0-9-_]+$/;
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
 					{
 						error: "Invalid userId format. Expected format: member_{memberId}",
@@ -452,11 +543,22 @@
 					entityId,
 				});
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -471,9 +573,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep:
+					"Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -517,13 +628,11 @@
 			await apiClient.deleteConnection(composioAccountId);
 			composioDeleteSuccess = true;
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
 			// Continue to delete from database even if Composio delete fails
 		}
@@ -540,17 +649,19 @@
 					memberId: memberId as Id<"members">,
 				});
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
 				);
 			}
@@ -562,13 +673,17 @@
 			composioDeleted: composioDeleteSuccess,
 		});
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..51c2bb49285c3005c7c6e09d077bbae7c1c5faf1
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -1,5 +1,10 @@
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
+import {
 	APP_CONFIGS,
 	AVAILABLE_APPS,
 	type AvailableApp,
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..21a893b75b755bec31272ca42d4387897f003504
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -1,6 +1,10 @@
 import { unstable_noStore as noStore } from "next/cache";
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	type AvailableApp,
 	createComposioClient,
 	getAllToolsForApps,
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..15c87068f6c16c0db2cb55a2727e8495f9a30292
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,18 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep:
+					"Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Preparing for clean commit update**
exec
/bin/zsh -lc 'git show -s --format="%h %s" HEAD' in /Users/macbook/Documents/GitHub/platform succeeded in 51ms:
965c586 fix(assistant): harden composio error fallback
file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..48ca353e160c62c14a45f95afb0fc697ae71ee04
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -9,6 +9,12 @@
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
 import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	buildAssistantResponseMetadata,
 	buildAssistantSystemPrompt,
 	classifyAssistantQuery,
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,21 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error("Authenticated session but no Convex token found"),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +272,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +461,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +492,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +519,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +545,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +628,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
-			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
 				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
+			return NextResponse.json(
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6da2e22ee6673d76a2e2ee70785c5fef43..4bcfaacd6980f41c5e2ccd5c961eec749c201d00
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -134,9 +145,20 @@
 				const redirectUrl = connection.redirectUrl;
 
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
 					);
 				}
@@ -162,12 +184,22 @@
 								createdBy: memberId as Id<"members">,
 							});
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -178,11 +210,22 @@
 					message: `Redirect user to ${toolkit} authorization`,
 				});
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
 				);
 			}
@@ -191,7 +234,12 @@
 		if (action === "complete") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -286,7 +334,13 @@
 							connectedBy: memberId as Id<"members">,
 						});
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -296,11 +350,22 @@
 					message: `${toolkit} connected successfully`,
 				});
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -308,9 +373,17 @@
 
 		return NextResponse.json({ error: "Invalid action" }, { status: 400 });
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -392,7 +465,13 @@
 					connectedAccounts,
 				});
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
 				return NextResponse.json({
 					success: true,
@@ -414,7 +493,13 @@
 					account: connectedAccount,
 				});
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
 					connected: false,
 					status: "NOT_FOUND",
@@ -428,7 +513,13 @@
 			// Validate userId format (should be member_{memberId})
 			const memberIdPattern = /^member_[A-Za-z0-9-_]+$/;
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
 					{
 						error: "Invalid userId format. Expected format: member_{memberId}",
@@ -452,11 +543,22 @@
 					entityId,
 				});
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -471,9 +573,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep:
+					"Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -517,13 +628,11 @@
 			await apiClient.deleteConnection(composioAccountId);
 			composioDeleteSuccess = true;
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
 			// Continue to delete from database even if Composio delete fails
 		}
@@ -540,17 +649,19 @@
 					memberId: memberId as Id<"members">,
 				});
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
 				);
 			}
@@ -562,13 +673,17 @@
 			composioDeleted: composioDeleteSuccess,
 		});
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..51c2bb49285c3005c7c6e09d077bbae7c1c5faf1
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -1,5 +1,10 @@
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
+import {
 	APP_CONFIGS,
 	AVAILABLE_APPS,
 	type AvailableApp,
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..21a893b75b755bec31272ca42d4387897f003504
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -1,6 +1,10 @@
 import { unstable_noStore as noStore } from "next/cache";
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	type AvailableApp,
 	createComposioClient,
 	getAllToolsForApps,
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..15c87068f6c16c0db2cb55a2727e8495f9a30292
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,18 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep:
+					"Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Appending progress entry with commit details**
exec
/bin/zsh -lc "cat >> .ralph/progress.md <<'EOF'
## [2026-02-12 18:xx] - S4: Harden error handling and fallback UX
Thread: 
Run: 20260212-180835-23441 (iteration 1)
Run log: /Users/macbook/Documents/GitHub/platform/.ralph/runs/run-20260212-180835-23441-iter-1.log
Run summary: /Users/macbook/Documents/GitHub/platform/.ralph/runs/run-20260212-180835-23441-iter-1.md
- Guardrails reviewed: yes
- No-commit run: false
- Commit: 965c586 fix(assistant): harden composio error fallback
- Post-commit status: "'`.ralph/runs/run-20260212-180835-23441-iter-1.log`, `.ralph/progress.md`
- Verification:
  - Command: `bun run type` -> PASS
  - Command: `bun run check` -> FAIL
  - Command: `bun run build` -> PASS
- Files changed:
  - src/lib/assistant-error-utils.ts
  - src/app/api/assistant/chatbot/route.ts
  - src/app/api/assistant/route.ts
  - src/app/api/assistant/composio/route.ts
  - src/app/api/assistant/composio/status/route.ts
  - src/app/api/assistant/composio/tools/route.ts
  - src/app/api/assistant/composio/agentauth/route.ts
  - .ralph/activity.log
  - .ralph/progress.md
  - .ralph/runs/run-20260212-180835-23441-iter-1.log
- What was implemented
  - Added shared assistant/composio error utilities for sanitized logging (`logRouteError`), safe error text redaction, and consistent actionable client error payloads.
  - Updated assistant and composio API routes to replace raw error/detailed payloads with actionable responses and consistent error codes/next steps.
  - Preserved and hardened fallback UX in chatbot route: Composio failures continue to fall back to Convex, and recoverable dual-path failures now return a usable assistant fallback response instead of hard-failing.
  - Removed raw exception object logging in assistant/composio routes to reduce sensitive-data leakage risk.
- **Learnings for future iterations:**
  - Patterns discovered
  - A shared route-level error utility keeps response shape and logging behavior consistent across assistant/composio endpoints.
  - Gotchas encountered
  - `bun run check` fails due large pre-existing repository diagnostics unrelated to S4; it remains useful for formatting but not as a clean gate in current repo state.
  - Useful context
  - `bun run build` succeeds with the new error utility and route wiring, confirming no regression in Next.js API route compilation.
---
EOF' in /Users/macbook/Documents/GitHub/platform succeeded in 51ms:

file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..48ca353e160c62c14a45f95afb0fc697ae71ee04
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -9,6 +9,12 @@
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
 import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	buildAssistantResponseMetadata,
 	buildAssistantSystemPrompt,
 	classifyAssistantQuery,
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,21 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error("Authenticated session but no Convex token found"),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +272,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +461,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +492,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +519,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +545,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +628,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
-			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
 				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
+			return NextResponse.json(
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6da2e22ee6673d76a2e2ee70785c5fef43..4bcfaacd6980f41c5e2ccd5c961eec749c201d00
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -134,9 +145,20 @@
 				const redirectUrl = connection.redirectUrl;
 
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
 					);
 				}
@@ -162,12 +184,22 @@
 								createdBy: memberId as Id<"members">,
 							});
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -178,11 +210,22 @@
 					message: `Redirect user to ${toolkit} authorization`,
 				});
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
 				);
 			}
@@ -191,7 +234,12 @@
 		if (action === "complete") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -286,7 +334,13 @@
 							connectedBy: memberId as Id<"members">,
 						});
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -296,11 +350,22 @@
 					message: `${toolkit} connected successfully`,
 				});
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -308,9 +373,17 @@
 
 		return NextResponse.json({ error: "Invalid action" }, { status: 400 });
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -392,7 +465,13 @@
 					connectedAccounts,
 				});
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
 				return NextResponse.json({
 					success: true,
@@ -414,7 +493,13 @@
 					account: connectedAccount,
 				});
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
 					connected: false,
 					status: "NOT_FOUND",
@@ -428,7 +513,13 @@
 			// Validate userId format (should be member_{memberId})
 			const memberIdPattern = /^member_[A-Za-z0-9-_]+$/;
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
 					{
 						error: "Invalid userId format. Expected format: member_{memberId}",
@@ -452,11 +543,22 @@
 					entityId,
 				});
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -471,9 +573,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep:
+					"Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -517,13 +628,11 @@
 			await apiClient.deleteConnection(composioAccountId);
 			composioDeleteSuccess = true;
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
 			// Continue to delete from database even if Composio delete fails
 		}
@@ -540,17 +649,19 @@
 					memberId: memberId as Id<"members">,
 				});
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
 				);
 			}
@@ -562,13 +673,17 @@
 			composioDeleted: composioDeleteSuccess,
 		});
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..51c2bb49285c3005c7c6e09d077bbae7c1c5faf1
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -1,5 +1,10 @@
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
+import {
 	APP_CONFIGS,
 	AVAILABLE_APPS,
 	type AvailableApp,
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..21a893b75b755bec31272ca42d4387897f003504
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -1,6 +1,10 @@
 import { unstable_noStore as noStore } from "next/cache";
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	type AvailableApp,
 	createComposioClient,
 	getAllToolsForApps,
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..15c87068f6c16c0db2cb55a2727e8495f9a30292
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,18 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep:
+					"Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Correcting placeholder timestamp**
codex
I’ve appended the progress entry and will now finalize timestamps, log completion in activity, then make a final commit for post-commit artifacts so the working tree is clean.

thinking
**Planning time substitution**
exec
/bin/zsh -lc "date '+%Y-%m-%d %H:%M:%S %z'" in /Users/macbook/Documents/GitHub/platform succeeded in 51ms:
2026-02-12 18:15:58 +0530
file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..48ca353e160c62c14a45f95afb0fc697ae71ee04
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -9,6 +9,12 @@
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
 import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	buildAssistantResponseMetadata,
 	buildAssistantSystemPrompt,
 	classifyAssistantQuery,
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,21 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error("Authenticated session but no Convex token found"),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +272,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +461,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +492,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +519,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +545,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +628,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
-			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
 				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
+			return NextResponse.json(
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6da2e22ee6673d76a2e2ee70785c5fef43..4bcfaacd6980f41c5e2ccd5c961eec749c201d00
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -134,9 +145,20 @@
 				const redirectUrl = connection.redirectUrl;
 
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
 					);
 				}
@@ -162,12 +184,22 @@
 								createdBy: memberId as Id<"members">,
 							});
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -178,11 +210,22 @@
 					message: `Redirect user to ${toolkit} authorization`,
 				});
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
 				);
 			}
@@ -191,7 +234,12 @@
 		if (action === "complete") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -286,7 +334,13 @@
 							connectedBy: memberId as Id<"members">,
 						});
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -296,11 +350,22 @@
 					message: `${toolkit} connected successfully`,
 				});
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -308,9 +373,17 @@
 
 		return NextResponse.json({ error: "Invalid action" }, { status: 400 });
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -392,7 +465,13 @@
 					connectedAccounts,
 				});
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
 				return NextResponse.json({
 					success: true,
@@ -414,7 +493,13 @@
 					account: connectedAccount,
 				});
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
 					connected: false,
 					status: "NOT_FOUND",
@@ -428,7 +513,13 @@
 			// Validate userId format (should be member_{memberId})
 			const memberIdPattern = /^member_[A-Za-z0-9-_]+$/;
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
 					{
 						error: "Invalid userId format. Expected format: member_{memberId}",
@@ -452,11 +543,22 @@
 					entityId,
 				});
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -471,9 +573,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep:
+					"Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -517,13 +628,11 @@
 			await apiClient.deleteConnection(composioAccountId);
 			composioDeleteSuccess = true;
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
 			// Continue to delete from database even if Composio delete fails
 		}
@@ -540,17 +649,19 @@
 					memberId: memberId as Id<"members">,
 				});
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
 				);
 			}
@@ -562,13 +673,17 @@
 			composioDeleted: composioDeleteSuccess,
 		});
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..51c2bb49285c3005c7c6e09d077bbae7c1c5faf1
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -1,5 +1,10 @@
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
+import {
 	APP_CONFIGS,
 	AVAILABLE_APPS,
 	type AvailableApp,
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..21a893b75b755bec31272ca42d4387897f003504
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -1,6 +1,10 @@
 import { unstable_noStore as noStore } from "next/cache";
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	type AvailableApp,
 	createComposioClient,
 	getAllToolsForApps,
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..15c87068f6c16c0db2cb55a2727e8495f9a30292
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,18 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep:
+					"Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}

exec
/bin/zsh -lc "perl -0pi -e 's/## \\[2026-02-12 18:xx\\] - S4: Harden error handling and fallback UX/## [2026-02-12 18:15:58 +0530] - S4: Harden error handling and fallback UX/' .ralph/progress.md" in /Users/macbook/Documents/GitHub/platform succeeded in 52ms:

file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..48ca353e160c62c14a45f95afb0fc697ae71ee04
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -9,6 +9,12 @@
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
 import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	buildAssistantResponseMetadata,
 	buildAssistantSystemPrompt,
 	classifyAssistantQuery,
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,21 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error("Authenticated session but no Convex token found"),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +272,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +461,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +492,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +519,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +545,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +628,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
-			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
 				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
+			return NextResponse.json(
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6da2e22ee6673d76a2e2ee70785c5fef43..4bcfaacd6980f41c5e2ccd5c961eec749c201d00
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -134,9 +145,20 @@
 				const redirectUrl = connection.redirectUrl;
 
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
 					);
 				}
@@ -162,12 +184,22 @@
 								createdBy: memberId as Id<"members">,
 							});
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -178,11 +210,22 @@
 					message: `Redirect user to ${toolkit} authorization`,
 				});
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
 				);
 			}
@@ -191,7 +234,12 @@
 		if (action === "complete") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -286,7 +334,13 @@
 							connectedBy: memberId as Id<"members">,
 						});
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -296,11 +350,22 @@
 					message: `${toolkit} connected successfully`,
 				});
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -308,9 +373,17 @@
 
 		return NextResponse.json({ error: "Invalid action" }, { status: 400 });
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -392,7 +465,13 @@
 					connectedAccounts,
 				});
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
 				return NextResponse.json({
 					success: true,
@@ -414,7 +493,13 @@
 					account: connectedAccount,
 				});
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
 					connected: false,
 					status: "NOT_FOUND",
@@ -428,7 +513,13 @@
 			// Validate userId format (should be member_{memberId})
 			const memberIdPattern = /^member_[A-Za-z0-9-_]+$/;
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
 					{
 						error: "Invalid userId format. Expected format: member_{memberId}",
@@ -452,11 +543,22 @@
 					entityId,
 				});
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -471,9 +573,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep:
+					"Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -517,13 +628,11 @@
 			await apiClient.deleteConnection(composioAccountId);
 			composioDeleteSuccess = true;
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
 			// Continue to delete from database even if Composio delete fails
 		}
@@ -540,17 +649,19 @@
 					memberId: memberId as Id<"members">,
 				});
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
 				);
 			}
@@ -562,13 +673,17 @@
 			composioDeleted: composioDeleteSuccess,
 		});
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..51c2bb49285c3005c7c6e09d077bbae7c1c5faf1
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -1,5 +1,10 @@
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
+import {
 	APP_CONFIGS,
 	AVAILABLE_APPS,
 	type AvailableApp,
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..21a893b75b755bec31272ca42d4387897f003504
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -1,6 +1,10 @@
 import { unstable_noStore as noStore } from "next/cache";
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	type AvailableApp,
 	createComposioClient,
 	getAllToolsForApps,
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..15c87068f6c16c0db2cb55a2727e8495f9a30292
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,18 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep:
+					"Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Appending activity log**
exec
/bin/zsh -lc "printf '[%s] S4 progress log updated with implementation and verification details\\n' \""'$(date -u '"'+%Y-%m-%d %H:%M:%S UTC')\" >> .ralph/activity.log" in /Users/macbook/Documents/GitHub/platform succeeded in 51ms:

file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..48ca353e160c62c14a45f95afb0fc697ae71ee04
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -9,6 +9,12 @@
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
 import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	buildAssistantResponseMetadata,
 	buildAssistantSystemPrompt,
 	classifyAssistantQuery,
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,21 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error("Authenticated session but no Convex token found"),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +272,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +461,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +492,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +519,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +545,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +628,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
-			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
 				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
+			return NextResponse.json(
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6da2e22ee6673d76a2e2ee70785c5fef43..4bcfaacd6980f41c5e2ccd5c961eec749c201d00
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -134,9 +145,20 @@
 				const redirectUrl = connection.redirectUrl;
 
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
 					);
 				}
@@ -162,12 +184,22 @@
 								createdBy: memberId as Id<"members">,
 							});
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -178,11 +210,22 @@
 					message: `Redirect user to ${toolkit} authorization`,
 				});
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
 				);
 			}
@@ -191,7 +234,12 @@
 		if (action === "complete") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -286,7 +334,13 @@
 							connectedBy: memberId as Id<"members">,
 						});
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -296,11 +350,22 @@
 					message: `${toolkit} connected successfully`,
 				});
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -308,9 +373,17 @@
 
 		return NextResponse.json({ error: "Invalid action" }, { status: 400 });
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -392,7 +465,13 @@
 					connectedAccounts,
 				});
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
 				return NextResponse.json({
 					success: true,
@@ -414,7 +493,13 @@
 					account: connectedAccount,
 				});
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
 					connected: false,
 					status: "NOT_FOUND",
@@ -428,7 +513,13 @@
 			// Validate userId format (should be member_{memberId})
 			const memberIdPattern = /^member_[A-Za-z0-9-_]+$/;
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
 					{
 						error: "Invalid userId format. Expected format: member_{memberId}",
@@ -452,11 +543,22 @@
 					entityId,
 				});
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -471,9 +573,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep:
+					"Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -517,13 +628,11 @@
 			await apiClient.deleteConnection(composioAccountId);
 			composioDeleteSuccess = true;
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
 			// Continue to delete from database even if Composio delete fails
 		}
@@ -540,17 +649,19 @@
 					memberId: memberId as Id<"members">,
 				});
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
 				);
 			}
@@ -562,13 +673,17 @@
 			composioDeleted: composioDeleteSuccess,
 		});
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..51c2bb49285c3005c7c6e09d077bbae7c1c5faf1
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -1,5 +1,10 @@
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
+import {
 	APP_CONFIGS,
 	AVAILABLE_APPS,
 	type AvailableApp,
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..21a893b75b755bec31272ca42d4387897f003504
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -1,6 +1,10 @@
 import { unstable_noStore as noStore } from "next/cache";
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	type AvailableApp,
 	createComposioClient,
 	getAllToolsForApps,
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..15c87068f6c16c0db2cb55a2727e8495f9a30292
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,18 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep:
+					"Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Logging progress updates**
exec
/bin/zsh -lc 'git status --short' in /Users/macbook/Documents/GitHub/platform succeeded in 51ms:
 M .ralph/activity.log
 M .ralph/progress.md
 M .ralph/runs/run-20260212-180835-23441-iter-1.log
file update:
diff --git a/src/app/api/assistant/chatbot/route.ts b/src/app/api/assistant/chatbot/route.ts
index ba636e7b5fabdc48e6c0b4eaa955431ed87ff202..48ca353e160c62c14a45f95afb0fc697ae71ee04
--- a/src/app/api/assistant/chatbot/route.ts
+++ b/src/app/api/assistant/chatbot/route.ts
@@ -9,6 +9,12 @@
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
 import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	buildRecoverableAssistantFallback,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	buildAssistantResponseMetadata,
 	buildAssistantSystemPrompt,
 	classifyAssistantQuery,
@@ -89,10 +95,12 @@
 			}
 		);
 	} catch (error) {
-		console.warn(
-			"[Chatbot Assistant] Failed to persist tool audit event",
-			error
-		);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "audit_persist_failed",
+			error,
+			level: "warn",
+		});
 	}
 }
 
@@ -131,16 +139,21 @@
 			if (token) {
 				convex.setAuth(token);
 			} else if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Authenticated session but no Convex token found"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "missing_convex_token",
+					error: new Error("Authenticated session but no Convex token found"),
+					level: "warn",
+				});
 			}
 		} catch (err) {
 			if (isAuthenticatedNextjs()) {
-				console.warn(
-					"[Chatbot Assistant] Failed to read Convex auth token from request",
-					err
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "convex_token_read_failed",
+					error: err,
+					level: "warn",
+				});
 			}
 		}
 
@@ -259,9 +272,14 @@
 			} catch (_error) {
 				// Composio setup failed, fall back to Convex
 				composioFallbackReason = "composio_initialization_failed";
-				console.warn(
-					"[Chatbot Assistant] Composio initialization failed, using Convex fallback"
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "composio_initialization_failed",
+					error: new Error(
+						"Composio initialization failed, using Convex fallback"
+					),
+					level: "warn",
+				});
 			}
 		} else if (needsExternalTools) {
 			composioFallbackReason = "composio_not_configured";
@@ -443,9 +461,14 @@
 
 						// Log warning if counts differ
 						if (toolCalls.length !== toolResults.length) {
-							console.warn(
-								`[Chatbot Assistant] Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
-							);
+							logRouteError({
+								route: "Chatbot Assistant",
+								stage: "tool_results_mismatch",
+								error: new Error(
+									`Tool calls and results count mismatch: ${toolCalls.length} calls, ${toolResults.length} results`
+								),
+								level: "warn",
+							});
 						}
 
 						// Get follow-up response with tool results
@@ -469,10 +492,11 @@
 						responseText =
 							followUpCompletion.choices[0]?.message?.content || responseText;
 					} catch (toolError) {
-						console.error(
-							"[Chatbot Assistant] Tool execution failed:",
-							toolError
-						);
+						logRouteError({
+							route: "Chatbot Assistant",
+							stage: "tool_execution_failed",
+							error: toolError,
+						});
 						await Promise.all(
 							toolCalls.map(async (call) => {
 								await logExternalToolAuditEvent({
@@ -495,8 +519,7 @@
 								});
 							})
 						);
-						responseText +=
-							"\n\nNote: Some operations could not be completed. Please try again or check your integration settings.";
+						responseText += `\n\nNote: I couldn't complete one or more ${connectedApps.join(", ")} actions. ${buildComposioFailureGuidance()}`;
 					}
 				}
 
@@ -522,10 +545,12 @@
 					}),
 				});
 			} catch (error) {
-				console.error(
-					"[Chatbot Assistant] OpenAI+Composio failed, falling back to Convex:",
-					error
-				);
+				logRouteError({
+					route: "Chatbot Assistant",
+					stage: "openai_composio_failed",
+					error,
+					context: { connectedAppsCount: connectedApps.length },
+				});
 				composioAttempted = true;
 				composioFallbackReason = "openai_composio_failed";
 				// Fall through to Convex assistant
@@ -603,25 +628,67 @@
 				metadata: responseMetadata,
 			});
 		} catch (error) {
-			console.error("[Chatbot Assistant] AI assistant failed:", error);
-			return NextResponse.json(
-				{
-					success: false,
-					error:
-						error instanceof Error
-							? error.message
-							: "Failed to generate assistant response",
+			logRouteError({
+				route: "Chatbot Assistant",
+				stage: "convex_assistant_failed",
+				error,
+				context: {
+					composioAttempted,
+					composioFallbackReason,
 				},
+			});
+			if (composioAttempted || composioFallbackReason) {
+				const fallbackResponse = buildRecoverableAssistantFallback(
+					"The external tools path could not complete your request"
+				);
+				return NextResponse.json({
+					success: true,
+					response: fallbackResponse,
+					sources: [],
+					actions: [],
+					toolResults: [],
+					assistantType: "convex",
+					composioToolsUsed: false,
+					metadata: buildAssistantResponseMetadata({
+						assistantType: "convex",
+						executionPath: "convex-assistant",
+						intent: queryIntent,
+						tools: {
+							internalEnabled: true,
+							externalEnabled: false,
+							externalUsed: false,
+							connectedApps,
+						},
+						fallback: {
+							attempted: true,
+							reason: composioFallbackReason ?? "convex_assistant_failed",
+						},
+					}),
+				});
+			}
+			return NextResponse.json(
+				buildActionableErrorPayload({
+					message: "Assistant response generation failed.",
+					nextStep:
+						"Retry your message. If it keeps failing, refresh and try a shorter prompt.",
+					code: "ASSISTANT_RESPONSE_FAILED",
+				}),
 				{ status: 500 }
 			);
 		}
 	} catch (error) {
-		console.error("[Chatbot Assistant] Error:", error);
+		logRouteError({
+			route: "Chatbot Assistant",
+			stage: "request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Assistant request failed before processing completed.",
+				nextStep:
+					"Check required fields and retry. If this persists, reconnect integrations and try again.",
+				code: "ASSISTANT_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/agentauth/route.ts b/src/app/api/assistant/composio/agentauth/route.ts
index b6979e6da2e22ee6673d76a2e2ee70785c5fef43..4bcfaacd6980f41c5e2ccd5c961eec749c201d00
--- a/src/app/api/assistant/composio/agentauth/route.ts
+++ b/src/app/api/assistant/composio/agentauth/route.ts
@@ -6,6 +6,12 @@
 import { type NextRequest, NextResponse } from "next/server";
 import { api } from "@/../convex/_generated/api";
 import type { Id } from "@/../convex/_generated/dataModel";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { initializeComposio } from "@/lib/composio";
 
 const convex = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);
@@ -111,7 +117,12 @@
 		if (action === "authorize") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for authorization");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_authorize",
+					error: new Error("Missing memberId for authorization"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -134,9 +145,20 @@
 				const redirectUrl = connection.redirectUrl;
 
 				if (!redirectUrl) {
-					console.error("No redirect URL received from Composio:", connection);
+					logRouteError({
+						route: "AgentAuth",
+						stage: "missing_redirect_url",
+						error: new Error("No redirect URL from Composio"),
+						context: { toolkit },
+					});
 					return NextResponse.json(
-						{ error: "No redirect URL received from authorization" },
+						buildActionableErrorPayload({
+							message: "Authorization URL was not returned by Composio.",
+							nextStep:
+								"Retry authorization. If this continues, verify the toolkit auth configuration.",
+							code: "AGENTAUTH_REDIRECT_URL_MISSING",
+							recoverable: true,
+						}),
 						{ status: 400 }
 					);
 				}
@@ -162,12 +184,22 @@
 								createdBy: memberId as Id<"members">,
 							});
 						} else {
-							console.warn(
-								`[AgentAuth] No auth config ID found for ${toolkit}`
-							);
+							logRouteError({
+								route: "AgentAuth",
+								stage: "auth_config_id_missing",
+								error: new Error("No auth config ID found"),
+								level: "warn",
+								context: { toolkit },
+							});
 						}
 					} catch (error) {
-						console.warn("Failed to store auth config:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_auth_config_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -178,11 +210,22 @@
 					message: `Redirect user to ${toolkit} authorization`,
 				});
 			} catch (error) {
-				console.error("Authorization error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "authorization_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to authorize toolkit: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to authorize ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_AUTHORIZE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 400 }
 				);
 			}
@@ -191,7 +234,12 @@
 		if (action === "complete") {
 			// Verify ownership: ensure the authenticated user has permission to act on this memberId
 			if (!memberId) {
-				console.error("[AgentAuth] Missing memberId for connection completion");
+				logRouteError({
+					route: "AgentAuth",
+					stage: "missing_member_id_complete",
+					error: new Error("Missing memberId for connection completion"),
+					level: "warn",
+				});
 				return NextResponse.json(
 					{ error: "Missing memberId" },
 					{ status: 400 }
@@ -286,7 +334,13 @@
 							connectedBy: memberId as Id<"members">,
 						});
 					} catch (error) {
-						console.warn("Failed to store connected account:", error);
+						logRouteError({
+							route: "AgentAuth",
+							stage: "store_connected_account_failed",
+							error,
+							level: "warn",
+							context: { toolkit, workspaceId, memberId },
+						});
 					}
 				}
 
@@ -296,11 +350,22 @@
 					message: `${toolkit} connected successfully`,
 				});
 			} catch (error) {
-				console.error("Connection completion error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "connection_completion_failed",
+					error,
+					context: { toolkit, workspaceId, memberId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to complete connection: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to complete ${toolkit} connection.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_COMPLETE_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -308,9 +373,17 @@
 
 		return NextResponse.json({ error: "Invalid action" }, { status: 400 });
 	} catch (error) {
-		console.error("[AgentAuth] Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "post_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_POST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -392,7 +465,13 @@
 					connectedAccounts,
 				});
 			} catch (convexError) {
-				console.error("[AgentAuth] Error fetching data:", convexError);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_data_failed",
+					error: convexError,
+					level: "warn",
+					context: { workspaceId },
+				});
 				// Return empty arrays if there's an error
 				return NextResponse.json({
 					success: true,
@@ -414,7 +493,13 @@
 					account: connectedAccount,
 				});
 			} catch (error) {
-				console.error("Status check error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "status_check_failed",
+					error,
+					level: "warn",
+					context: { composioAccountId },
+				});
 				return NextResponse.json({
 					connected: false,
 					status: "NOT_FOUND",
@@ -428,7 +513,13 @@
 			// Validate userId format (should be member_{memberId})
 			const memberIdPattern = /^member_[A-Za-z0-9-_]+$/;
 			if (!memberIdPattern.test(userId)) {
-				console.error(`[AgentAuth] Invalid userId format: ${userId}`);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "invalid_user_id_format",
+					error: new Error("Invalid userId format"),
+					level: "warn",
+					context: { userId },
+				});
 				return NextResponse.json(
 					{
 						error: "Invalid userId format. Expected format: member_{memberId}",
@@ -452,11 +543,22 @@
 					entityId,
 				});
 			} catch (error) {
-				console.error("Tools fetch error:", error);
+				logRouteError({
+					route: "AgentAuth",
+					stage: "fetch_tools_failed",
+					error,
+					context: { toolkit, workspaceId, userId },
+				});
 				return NextResponse.json(
-					{
-						error: `Failed to fetch tools: ${error instanceof Error ? error.message : "Unknown error"}`,
-					},
+					buildActionableErrorPayload({
+						message: `Failed to fetch tools for ${toolkit}.`,
+						nextStep: buildComposioFailureGuidance(),
+						code: "AGENTAUTH_FETCH_TOOLS_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							error instanceof Error ? error.message : "Unknown error"
+						),
+					}),
 					{ status: 500 }
 				);
 			}
@@ -471,9 +573,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("[AgentAuth] GET Error:", error);
+		logRouteError({
+			route: "AgentAuth",
+			stage: "get_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{ error: "AgentAuth GET operation failed" },
+			buildActionableErrorPayload({
+				message: "Agent auth query failed.",
+				nextStep:
+					"Retry the request and confirm all required query parameters.",
+				code: "AGENTAUTH_GET_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -517,13 +628,11 @@
 			await apiClient.deleteConnection(composioAccountId);
 			composioDeleteSuccess = true;
 		} catch (error) {
-			console.error(
-				"[AgentAuth DELETE] ✗ Error disconnecting from Composio:",
-				error
-			);
-			console.error("[AgentAuth DELETE] Error details:", {
-				message: error instanceof Error ? error.message : String(error),
-				stack: error instanceof Error ? error.stack : undefined,
+			logRouteError({
+				route: "AgentAuth DELETE",
+				stage: "composio_disconnect_failed",
+				error,
+				context: { composioAccountId, memberId, workspaceId },
 			});
 			// Continue to delete from database even if Composio delete fails
 		}
@@ -540,17 +649,19 @@
 					memberId: memberId as Id<"members">,
 				});
 			} catch (error) {
-				console.error(
-					"[AgentAuth DELETE] ✗ Error deleting database record:",
-					error
-				);
-				console.error("[AgentAuth DELETE] Database error details:", {
-					message: error instanceof Error ? error.message : String(error),
-					connectedAccountId,
-					memberId,
+				logRouteError({
+					route: "AgentAuth DELETE",
+					stage: "database_disconnect_failed",
+					error,
+					context: { connectedAccountId, memberId, workspaceId },
 				});
 				return NextResponse.json(
-					{ error: "Failed to delete connection from database" },
+					buildActionableErrorPayload({
+						message: "Failed to remove local connection record.",
+						nextStep:
+							"Retry disconnect. If this continues, refresh the integrations page and retry.",
+						code: "AGENTAUTH_DB_DISCONNECT_FAILED",
+					}),
 					{ status: 500 }
 				);
 			}
@@ -562,13 +673,17 @@
 			composioDeleted: composioDeleteSuccess,
 		});
 	} catch (error) {
-		console.error("[AgentAuth DELETE] Unexpected error:", error);
-		console.error("[AgentAuth DELETE] Error details:", {
-			message: error instanceof Error ? error.message : String(error),
-			stack: error instanceof Error ? error.stack : undefined,
+		logRouteError({
+			route: "AgentAuth DELETE",
+			stage: "delete_request_failed",
+			error,
 		});
 		return NextResponse.json(
-			{ error: "Failed to disconnect account" },
+			buildActionableErrorPayload({
+				message: "Failed to disconnect account.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "AGENTAUTH_DELETE_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/route.ts b/src/app/api/assistant/composio/route.ts
index 82e3a085b23870efd4b70d030d044644bf73dac7..51c2bb49285c3005c7c6e09d077bbae7c1c5faf1
--- a/src/app/api/assistant/composio/route.ts
+++ b/src/app/api/assistant/composio/route.ts
@@ -1,5 +1,10 @@
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
+import {
 	APP_CONFIGS,
 	AVAILABLE_APPS,
 	type AvailableApp,
@@ -41,12 +46,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "status_fetch_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to fetch Composio status",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to fetch Composio status.",
+				nextStep:
+					"Confirm the integration is configured and retry the status request.",
+				code: "COMPOSIO_STATUS_FETCH_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
@@ -92,7 +103,18 @@
 					message: `Redirect to ${app} for authorization`,
 				});
 			} else {
-				return NextResponse.json({ error: result.error }, { status: 400 });
+				return NextResponse.json(
+					buildActionableErrorPayload({
+						message: `Could not start ${app} authorization.`,
+						nextStep: "Verify your app configuration and retry connection.",
+						code: "COMPOSIO_CONNECT_FAILED",
+						recoverable: true,
+						fallbackResponse: sanitizeErrorMessage(
+							result.error || "Authorization could not be started."
+						),
+					}),
+					{ status: 400 }
+				);
 			}
 		}
 
@@ -101,12 +123,18 @@
 			{ status: 400 }
 		);
 	} catch (error) {
-		console.error("Composio API error:", error);
+		logRouteError({
+			route: "Composio API",
+			stage: "connect_request_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process Composio request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Failed to process Composio request.",
+				nextStep:
+					"Retry the request. If this continues, check Composio API key and auth config settings.",
+				code: "COMPOSIO_REQUEST_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/composio/status/route.ts b/src/app/api/assistant/composio/status/route.ts
index 6cadfecb4ce2c907a803db105f5a3bc0266e6be5..21a893b75b755bec31272ca42d4387897f003504
--- a/src/app/api/assistant/composio/status/route.ts
+++ b/src/app/api/assistant/composio/status/route.ts
@@ -1,6 +1,10 @@
 import { unstable_noStore as noStore } from "next/cache";
 import { type NextRequest, NextResponse } from "next/server";
 import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
+import {
 	type AvailableApp,
 	createComposioClient,
 	getAllToolsForApps,
@@ -62,7 +66,12 @@
 				);
 				totalTools = allTools.length;
 			} catch (error) {
-				console.warn("[Connections Status] Failed to get tool count:", error);
+				logRouteError({
+					route: "Connections Status",
+					stage: "tool_count_fetch_failed",
+					error,
+					level: "warn",
+				});
 				// Don't fail the whole request if tool fetching fails
 				totalTools = 0;
 			}
@@ -78,11 +87,20 @@
 			timestamp: new Date().toISOString(),
 		});
 	} catch (error) {
-		console.error("[Connections Status] Error:", error);
+		logRouteError({
+			route: "Connections Status",
+			stage: "status_route_failed",
+			error,
+		});
 		return NextResponse.json(
 			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
+				...buildActionableErrorPayload({
+					message: "Unable to load integration status.",
+					nextStep:
+						"Retry in a few seconds. If it persists, reconnect the integration and retry.",
+					code: "COMPOSIO_STATUS_ROUTE_FAILED",
+					recoverable: true,
+				}),
 				connected: [],
 				totalTools: 0,
 			},
diff --git a/src/app/api/assistant/composio/tools/route.ts b/src/app/api/assistant/composio/tools/route.ts
index 8a70d56644c4aa40a0552a4ea802c974dddd7267..0e36e1b622488afa2db506149a7203b09a6c8aed
--- a/src/app/api/assistant/composio/tools/route.ts
+++ b/src/app/api/assistant/composio/tools/route.ts
@@ -1,5 +1,11 @@
 import { type NextRequest, NextResponse } from "next/server";
 import OpenAI from "openai";
+import {
+	buildActionableErrorPayload,
+	buildComposioFailureGuidance,
+	logRouteError,
+	sanitizeErrorMessage,
+} from "@/lib/assistant-error-utils";
 import { createComposioClient } from "@/lib/composio-config";
 
 // Initialize OpenAI client
@@ -42,11 +48,21 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} catch (error) {
-			console.error("Error fetching tools:", error);
+			logRouteError({
+				route: "Composio Tools",
+				stage: "tools_fetch_failed",
+				error,
+			});
 			tools = [];
 		}
 
@@ -101,10 +117,17 @@
 							toolName: toolCall.function.name,
 						});
 					} catch (error) {
-						console.error("Tool execution error:", error);
+						logRouteError({
+							route: "Composio Tools",
+							stage: "tool_execution_error",
+							error,
+							context: { toolName: toolCall.function.name },
+						});
 						toolResults.push({
 							toolCallId: toolCall.id,
-							error: error instanceof Error ? error.message : "Unknown error",
+							error: sanitizeErrorMessage(
+								error instanceof Error ? error.message : "Unknown error"
+							),
 							toolName: toolCall.function.name,
 						});
 					}
@@ -152,12 +175,18 @@
 			availableTools: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_post_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Composio tools request failed.",
+				nextStep: buildComposioFailureGuidance(),
+				code: "COMPOSIO_TOOLS_POST_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
@@ -193,7 +222,13 @@
 						tools.push(appTools);
 					}
 				} catch (error) {
-					console.warn(`No tools found for app ${appName}:`, error);
+					logRouteError({
+						route: "Composio Tools",
+						stage: "app_tools_missing_get",
+						error,
+						level: "warn",
+						context: { appName },
+					});
 				}
 			}
 		} else {
@@ -202,7 +237,13 @@
 				const allTools = await composio.tools.get(entityId, {} as any);
 				tools = Array.isArray(allTools) ? allTools : [allTools];
 			} catch (error) {
-				console.warn("No tools found for entity:", error);
+				logRouteError({
+					route: "Composio Tools",
+					stage: "entity_tools_missing_get",
+					error,
+					level: "warn",
+					context: { entityId },
+				});
 				tools = [];
 			}
 		}
@@ -218,12 +259,19 @@
 			count: tools.length,
 		});
 	} catch (error) {
-		console.error("[Composio Tools] GET Error:", error);
+		logRouteError({
+			route: "Composio Tools",
+			stage: "tools_get_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				success: false,
-				error: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Unable to fetch available Composio tools.",
+				nextStep:
+					"Confirm the account is connected, then retry the tools request.",
+				code: "COMPOSIO_TOOLS_GET_FAILED",
+				recoverable: true,
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/app/api/assistant/route.ts b/src/app/api/assistant/route.ts
index c704895b6e2a9e5b90cc3090f56b8eb3dfe5e698..15c87068f6c16c0db2cb55a2727e8495f9a30292
--- a/src/app/api/assistant/route.ts
+++ b/src/app/api/assistant/route.ts
@@ -1,4 +1,8 @@
 import { type NextRequest, NextResponse } from "next/server";
+import {
+	buildActionableErrorPayload,
+	logRouteError,
+} from "@/lib/assistant-error-utils";
 
 // Redirect to the chatbot endpoint
 export async function POST(req: NextRequest) {
@@ -30,12 +34,18 @@
 		const result = await chatbotResponse.json();
 		return NextResponse.json(result, { status: chatbotResponse.status });
 	} catch (error) {
-		console.error("[Assistant Router] Error:", error);
+		logRouteError({
+			route: "Assistant Router",
+			stage: "forwarding_failed",
+			error,
+		});
 		return NextResponse.json(
-			{
-				error: "Failed to process request",
-				details: error instanceof Error ? error.message : "Unknown error",
-			},
+			buildActionableErrorPayload({
+				message: "Could not forward the assistant request.",
+				nextStep:
+					"Retry in a few seconds. If it persists, refresh and try again.",
+				code: "ASSISTANT_ROUTER_FORWARD_FAILED",
+			}),
 			{ status: 500 }
 		);
 	}
diff --git a/src/lib/assistant-error-utils.ts b/src/lib/assistant-error-utils.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0c0c912b2ec33fb178b73555394ff022d1c8222
--- /dev/null
+++ b/src/lib/assistant-error-utils.ts
@@ -0,0 +1,106 @@
+import { sanitizeAuditPayload } from "@/lib/assistant-tool-audit";
+
+const REDACTED = "[REDACTED]";
+const MAX_ERROR_MESSAGE_LENGTH = 280;
+const SENSITIVE_VALUE_PATTERN =
+	/(Bearer\s+)[^\s]+|((?:api[_-]?key|token|secret|password|authorization|cookie)\s*[:=]\s*)["']?[^"',\s}]+/gi;
+
+type ErrorLike = {
+	name?: string;
+	message?: string;
+	stack?: string;
+	code?: string;
+	status?: number;
+};
+
+export function sanitizeErrorMessage(input: string): string {
+	return input
+		.replace(SENSITIVE_VALUE_PATTERN, (...args) => {
+			if (args[1]) {
+				return `${args[1]}${REDACTED}`;
+			}
+			if (args[2]) {
+				return `${args[2]}${REDACTED}`;
+			}
+			return REDACTED;
+		})
+		.slice(0, MAX_ERROR_MESSAGE_LENGTH);
+}
+
+function normalizeError(error: unknown): {
+	name: string;
+	message: string;
+	code?: string;
+	stack?: string;
+} {
+	const err = (error ?? {}) as ErrorLike;
+	const message =
+		typeof err.message === "string" && err.message.trim().length > 0
+			? err.message
+			: "Unknown error";
+	return {
+		name: typeof err.name === "string" ? err.name : "Error",
+		message: sanitizeErrorMessage(message),
+		code: typeof err.code === "string" ? err.code : undefined,
+		stack:
+			typeof err.stack === "string"
+				? sanitizeErrorMessage(err.stack.split("\n").slice(0, 3).join("\n"))
+				: undefined,
+	};
+}
+
+export function logRouteError(params: {
+	route: string;
+	stage: string;
+	error: unknown;
+	context?: Record<string, unknown>;
+	level?: "warn" | "error";
+}) {
+	const payload = {
+		stage: params.stage,
+		error: normalizeError(params.error),
+		context: sanitizeAuditPayload(params.context ?? {}),
+	};
+	if (params.level === "warn") {
+		console.warn(`[${params.route}] ${params.stage}`, payload);
+		return;
+	}
+	console.error(`[${params.route}] ${params.stage}`, payload);
+}
+
+export function buildActionableErrorPayload(params: {
+	message: string;
+	nextStep: string;
+	code: string;
+	recoverable?: boolean;
+	fallbackResponse?: string;
+}): {
+	success: false;
+	error: string;
+	nextStep: string;
+	code: string;
+	recoverable: boolean;
+	fallbackResponse?: string;
+} {
+	return {
+		success: false,
+		error: params.message,
+		nextStep: params.nextStep,
+		code: params.code,
+		recoverable: params.recoverable ?? false,
+		fallbackResponse: params.fallbackResponse,
+	};
+}
+
+export function buildComposioFailureGuidance(): string {
+	return "Check your connected integrations in Assistant settings, then retry.";
+}
+
+export function buildRecoverableAssistantFallback(reason?: string): string {
+	const base =
+		"I hit a temporary issue with external integrations, but I can still help with workspace tasks.";
+	if (!reason) {
+		return `${base} Try again in a moment or reconnect the integration.`;
+	}
+	return `${base} Reason: ${reason}. Try again in a moment or reconnect the integration.`;
+}


thinking
**Adding second commit with docs update**
